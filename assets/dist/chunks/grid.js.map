{"version":3,"file":"grid.js","sources":["../../src/module/grid.ts"],"sourcesContent":["import { __, deleteConfirm, h, loadAlpine, simpleAlert, simpleConfirm, slideDown, slideUp } from '../service';\r\nimport { Nullable } from '../types';\r\nimport type { UnicornFormElement } from './form';\r\n\r\nexport class UnicornGridElement {\r\n  options: Record<string, any>;\r\n  ordering = '';\r\n  state = {};\r\n\r\n  constructor(\r\n    selector: string,\r\n    public element: HTMLElement,\r\n    public form: UnicornFormElement,\r\n    options: Record<string, any> = {}\r\n  ) {\r\n    this.options = { ...options };\r\n\r\n    this.bindEvents();\r\n  }\r\n\r\n  bindEvents() {\r\n    const inputs = this.element.querySelectorAll<HTMLInputElement>('input[data-role=grid-checkbox]');\r\n\r\n    for (const ch of inputs) {\r\n      ch.addEventListener('click', () => {\r\n        ch.dispatchEvent(new CustomEvent('change'));\r\n      });\r\n      ch.addEventListener('change', () => {\r\n        const event = new CustomEvent('unicorn:checked', {\r\n          detail: { grid: this }\r\n        });\r\n\r\n        this.form.element?.dispatchEvent(event);\r\n      });\r\n    }\r\n  }\r\n\r\n  initComponent(store = 'grid', custom: Record<string, string> = {}) {\r\n    this.ordering = this.element?.dataset?.ordering || '';\r\n\r\n    if (this.ordering) {\r\n      if (!this.ordering.toLowerCase().endsWith(' asc')\r\n        && !this.ordering.toLowerCase().endsWith(' desc')) {\r\n        this.ordering += ' ASC';\r\n      }\r\n    }\r\n\r\n    return loadAlpine((Alpine) => {\r\n      Alpine.store(store, this.useState(custom));\r\n    });\r\n  }\r\n\r\n  useState(this: any, custom: Record<string, any> = {}) {\r\n    const state: Partial<Record<string, any>> = {\r\n      form: this.form.useState(custom),\r\n    };\r\n\r\n    Object.getOwnPropertyNames(Object.getPrototypeOf(this))\r\n      .map(item => {\r\n        const prop = this[item];\r\n\r\n        if (typeof prop === 'function') {\r\n          return state[item] = this[item].bind(this);\r\n        }\r\n\r\n        return item;\r\n      });\r\n\r\n    return Object.assign(\r\n      state,\r\n      custom\r\n    );\r\n  }\r\n\r\n  getElement() {\r\n    return this.element;\r\n  }\r\n\r\n  sendFilter($event?: Event, method?: string) {\r\n    if ($event) {\r\n      $event.preventDefault();\r\n    }\r\n\r\n    this.form.submit(null, null, method);\r\n  }\r\n\r\n  clearFilters(element: HTMLElement, method?: Nullable<string>): void {\r\n    element.querySelectorAll('input, textarea, select').forEach((ele) => {\r\n      (ele as HTMLInputElement).value = '';\r\n    });\r\n\r\n    this.form.submit(null, null, method);\r\n  }\r\n\r\n  async toggleFilters(open: boolean, filterForm: HTMLElement) {\r\n    if (open) {\r\n      await slideDown(filterForm);\r\n    } else {\r\n      await slideUp(filterForm);\r\n    }\r\n  }\r\n\r\n  sort($el: HTMLElement): boolean {\r\n    const dir = this.getDirection($el);\r\n\r\n    const field = $el.dataset.field;\r\n    let asc = $el.dataset.asc;\r\n    let desc = $el.dataset.desc;\r\n\r\n    if (field) {\r\n      asc = field + ' ASC';\r\n      desc = field + ' DESC';\r\n    }\r\n\r\n    if (dir === 'ASC') {\r\n      return this.sortBy(desc);\r\n    }\r\n\r\n    return this.sortBy(asc);\r\n  }\r\n\r\n  /**\r\n   * Sort two items.\r\n   */\r\n  sortBy(ordering: Nullable<string>): boolean {\r\n    if (!ordering) {\r\n      return false;\r\n    }\r\n\r\n    let orderingInput = this.element.querySelector<HTMLInputElement>('input[name=list_ordering]');\r\n\r\n    if (!orderingInput) {\r\n      orderingInput = h('input', { name: 'list_ordering', type: 'hidden', value: '' });\r\n\r\n      this.element.appendChild(orderingInput);\r\n    }\r\n\r\n    orderingInput.value = ordering;\r\n\r\n    return this.form.put();\r\n  }\r\n\r\n  isSortActive($el: HTMLElement): boolean {\r\n    return this.getDirection($el) != null;\r\n  }\r\n\r\n  getDirection($el: HTMLElement): \"ASC\" | \"DESC\" | null {\r\n    const field = $el.dataset.field;\r\n    let asc = $el.dataset.asc;\r\n    let desc = $el.dataset.desc;\r\n\r\n    if (field) {\r\n      asc = field + ' ASC';\r\n      desc = field + ' DESC';\r\n    }\r\n\r\n    if (this.orderingEquals(asc, this.ordering)) {\r\n      return 'ASC';\r\n    } else if (this.orderingEquals(desc, this.ordering)) {\r\n      return 'DESC';\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  orderingEquals(a: Nullable<string>, b: Nullable<string>): boolean {\r\n    a = a || '';\r\n    b = b || '';\r\n\r\n    a = a.replace(/\\s+/g, ' ').trim().toLowerCase();\r\n    b = b.replace(/\\s+/g, ' ').trim().toLowerCase();\r\n\r\n    return a === b;\r\n  }\r\n\r\n  /**\r\n   * Check a row's checkbox.\r\n   */\r\n  checkRow(row: number, value = true): void {\r\n    const ch = this.getCheckboxByRow(row);\r\n\r\n    if (!ch) {\r\n      throw new Error('Checkbox of row: ' + row + ' not found.');\r\n    }\r\n\r\n    ch.checked = value;\r\n    ch.dispatchEvent(new Event('input'));\r\n    ch.dispatchEvent(new Event('change'));\r\n  }\r\n\r\n  getCheckboxByRow(row: number): Nullable<HTMLInputElement> {\r\n    return this.form.element?.querySelector<HTMLInputElement>(\r\n      `input[data-role=grid-checkbox][data-row-number=\"${row}\"]`\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Update a row.\r\n   */\r\n  updateRow(row: number, url?: Nullable<string>, data?: Nullable<Record<string, any>>) {\r\n    const ch = this.getCheckboxByRow(row);\r\n\r\n    if (!ch) {\r\n      return false;\r\n    }\r\n\r\n    return this.updateItem(ch.value, url, data);\r\n  }\r\n\r\n  /**\r\n   * Update an item by id.\r\n   */\r\n  updateItem(id: string | number, url?: Nullable<string>, data?: Nullable<Record<string, any>>): boolean {\r\n    this.toggleAll(false);\r\n\r\n    this.disableAllCheckboxes();\r\n\r\n    this.form.injectInput('id[]', id);\r\n\r\n    return this.form.patch(url, data);\r\n  }\r\n\r\n  /**\r\n   * Update a item with batch task.\r\n   */\r\n  updateItemByTask(\r\n    task: string,\r\n    id: string | number,\r\n    url?: Nullable<string>,\r\n    data?: Nullable<Record<string, any>>\r\n  ): boolean {\r\n    data = data || {};\r\n    data.task = task;\r\n\r\n    return this.updateItem(id, url, data);\r\n  }\r\n\r\n  /**\r\n   * @deprecated  Use updateItemByTask() instead.\r\n   */\r\n  doTask(task: string, id: number | string, url?: Nullable<string>, data?: Nullable<Record<string, any>>): boolean {\r\n    return this.updateItemByTask(task, id, url, data);\r\n  }\r\n\r\n  /**\r\n   * Update a row with batch task.\r\n   */\r\n  updateRowByTask(task: string, row: number, url?: Nullable<string>, data?: Nullable<Record<string, any>>): boolean {\r\n    const ch = this.getCheckboxByRow(row);\r\n\r\n    if (!ch) {\r\n      return false;\r\n    }\r\n\r\n    return this.updateItemByTask(task, ch.value, url, data);\r\n  }\r\n\r\n  /**\r\n   * Batch update items.\r\n   */\r\n  updateListByTask(task: string, url?: Nullable<string>, data?: Nullable<Record<string, any>>): boolean {\r\n    data = data || {};\r\n    data.task = task;\r\n\r\n    return this.form.patch(url, data);\r\n  }\r\n\r\n  /**\r\n   * Copy a row.\r\n   */\r\n  copyItem(id: string | number, url?: Nullable<string>, data?: Nullable<Record<string, any>>): boolean {\r\n    this.toggleAll(false);\r\n\r\n    this.disableAllCheckboxes();\r\n\r\n    this.form.injectInput('id[]', id);\r\n\r\n    return this.form.post(url, data);\r\n  }\r\n\r\n  /**\r\n   * Copy a row.\r\n   */\r\n  copyRow(row: number, url?: Nullable<string>, data?: Nullable<Record<string, any>>): boolean {\r\n    const ch = this.getCheckboxByRow(row);\r\n\r\n    if (!ch) {\r\n      return false;\r\n    }\r\n\r\n    return this.copyItem(ch.value, url, data);\r\n  }\r\n\r\n  /**\r\n   * Delete checked items.\r\n   */\r\n  deleteList(\r\n    message?: Nullable<string> | false,\r\n    url?: Nullable<string>,\r\n    data?: Nullable<Record<string, any>>\r\n  ): boolean {\r\n    if (!this.validateChecked()) {\r\n      return false;\r\n    }\r\n\r\n    message = message == null ? __('unicorn.message.delete.confirm') : message;\r\n\r\n    if (message !== false) {\r\n      simpleConfirm(message).then(isConfirm => {\r\n        if (isConfirm) {\r\n          this.form.delete(url, data);\r\n        }\r\n      });\r\n    } else {\r\n      this.form.delete(url, data);\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Delete an item by row.\r\n   */\r\n  async deleteRow(row: number,\r\n                  msg?: Nullable<string>,\r\n                  url?: Nullable<string>,\r\n                  data?: Nullable<Record<string, any>>): Promise<boolean> {\r\n    const ch = this.getCheckboxByRow(row);\r\n\r\n    if (!ch) {\r\n      return false;\r\n    }\r\n\r\n    return this.deleteItem(ch.value, msg, url, data);\r\n  }\r\n\r\n  /**\r\n   * Delete an item.\r\n   */\r\n  async deleteItem(id: string,\r\n                   msg?: Nullable<string>,\r\n                   url?: Nullable<string>,\r\n                   data?: Nullable<Record<string, any>>): Promise<boolean> {\r\n    msg = msg || __('unicorn.message.delete.confirm');\r\n\r\n    const isConfirm = await deleteConfirm(msg);\r\n\r\n    if (isConfirm) {\r\n      // this.toggleAll(false);\r\n      // this.checkRow(row);\r\n      data = data || {};\r\n\r\n      data.id = id;\r\n\r\n      this.form.delete(url, data);\r\n    }\r\n\r\n    return isConfirm;\r\n  }\r\n\r\n  /**\r\n   * Toggle all checkboxes.\r\n   */\r\n  toggleAll(value: boolean) {\r\n    Array.from(\r\n      this.element.querySelectorAll<HTMLInputElement>('input[data-role=grid-checkbox][type=checkbox]')\r\n    )\r\n      .forEach((input) => {\r\n        input.checked = value;\r\n\r\n        input.dispatchEvent(new CustomEvent('input'));\r\n        input.dispatchEvent(new CustomEvent('change'));\r\n      });\r\n\r\n    return this;\r\n  }\r\n\r\n  disableAllCheckboxes() {\r\n    Array.from(\r\n      this.element.querySelectorAll<HTMLInputElement>('input[data-role=grid-checkbox][type=checkbox]')\r\n    )\r\n      .forEach((input) => {\r\n        input.disabled = true;\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Count checked checkboxes.\r\n   */\r\n  countChecked(): number {\r\n    return this.getChecked().length;\r\n  }\r\n\r\n  /**\r\n   * Get Checked boxes.\r\n   */\r\n  getChecked(): HTMLInputElement[] {\r\n    return Array.from(\r\n      this.element.querySelectorAll<HTMLInputElement>('input[data-role=grid-checkbox][type=checkbox]:checked')\r\n    );\r\n  }\r\n\r\n  getCheckedValues(): string[] {\r\n    return this.getChecked().map(input => input.value);\r\n  }\r\n\r\n  /**\r\n   * Validate there has one or more checked boxes.\r\n   */\r\n  validateChecked(event?: Event, callback?: (grid: UnicornGridElement) => any, msg?: string): this {\r\n    msg = msg || __('unicorn.message.grid.checked');\r\n\r\n    if (!this.hasChecked()) {\r\n      if (msg !== '') {\r\n        simpleAlert(msg);\r\n      }\r\n\r\n      if (event) {\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n      }\r\n\r\n      return this;\r\n    }\r\n\r\n    if (callback) {\r\n      callback(this);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  hasChecked(): boolean {\r\n    return this.countChecked() > 0;\r\n  }\r\n\r\n  /**\r\n   * Reorder all.\r\n   */\r\n  reorderAll(url?: Nullable<string>, data?: Nullable<Record<string, any>>) {\r\n    return this.updateListByTask('reorder', url, data);\r\n  }\r\n\r\n  /**\r\n   * Reorder items.\r\n   */\r\n  moveItem(id: number | string, delta: number, url?: Nullable<string>, data?: Nullable<Record<string, any>>): boolean {\r\n    data = data || {};\r\n    data.delta = delta;\r\n\r\n    return this.updateItemByTask('move', id, url, data);\r\n  }\r\n\r\n  moveUp(id: string | number, url?: Nullable<string>, data?: Nullable<Record<string, any>>): boolean {\r\n    return this.moveItem(id, -1, url, data);\r\n  }\r\n\r\n  moveDown(id: string | number, url?: Nullable<string>, data?: Nullable<Record<string, any>>): boolean {\r\n    return this.moveItem(id, 1, url, data);\r\n  }\r\n\r\n  getId(suffix = '') {\r\n    return this.form.element?.id + suffix;\r\n  }\r\n}\r\n"],"names":[],"mappings":";AAIO,MAAM,mBAAmB;AAAA,EAK9B,YACE,UACO,SACA,MACP,UAA+B,CAAA,GAC/B;AAHO,SAAA,UAAA;AACA,SAAA,OAAA;AAGP,SAAK,UAAU,EAAE,GAAG,QAAA;AAEpB,SAAK,WAAA;AAAA,EACP;AAAA,EAbA;AAAA,EACA,WAAW;AAAA,EACX,QAAQ,CAAA;AAAA,EAaR,aAAa;AACX,UAAM,SAAS,KAAK,QAAQ,iBAAmC,gCAAgC;AAE/F,eAAW,MAAM,QAAQ;AACvB,SAAG,iBAAiB,SAAS,MAAM;AACjC,WAAG,cAAc,IAAI,YAAY,QAAQ,CAAC;AAAA,MAC5C,CAAC;AACD,SAAG,iBAAiB,UAAU,MAAM;AAClC,cAAM,QAAQ,IAAI,YAAY,mBAAmB;AAAA,UAC/C,QAAQ,EAAE,MAAM,KAAA;AAAA,QAAK,CACtB;AAED,aAAK,KAAK,SAAS,cAAc,KAAK;AAAA,MACxC,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,cAAc,QAAQ,QAAQ,SAAiC,CAAA,GAAI;AACjE,SAAK,WAAW,KAAK,SAAS,SAAS,YAAY;AAEnD,QAAI,KAAK,UAAU;AACjB,UAAI,CAAC,KAAK,SAAS,YAAA,EAAc,SAAS,MAAM,KAC3C,CAAC,KAAK,SAAS,YAAA,EAAc,SAAS,OAAO,GAAG;AACnD,aAAK,YAAY;AAAA,MACnB;AAAA,IACF;AAEA,WAAO,WAAW,CAAC,WAAW;AAC5B,aAAO,MAAM,OAAO,KAAK,SAAS,MAAM,CAAC;AAAA,IAC3C,CAAC;AAAA,EACH;AAAA,EAEA,SAAoB,SAA8B,IAAI;AACpD,UAAM,QAAsC;AAAA,MAC1C,MAAM,KAAK,KAAK,SAAS,MAAM;AAAA,IAAA;AAGjC,WAAO,oBAAoB,OAAO,eAAe,IAAI,CAAC,EACnD,IAAI,CAAA,SAAQ;AACX,YAAM,OAAO,KAAK,IAAI;AAEtB,UAAI,OAAO,SAAS,YAAY;AAC9B,eAAO,MAAM,IAAI,IAAI,KAAK,IAAI,EAAE,KAAK,IAAI;AAAA,MAC3C;AAEA,aAAO;AAAA,IACT,CAAC;AAEH,WAAO,OAAO;AAAA,MACZ;AAAA,MACA;AAAA,IAAA;AAAA,EAEJ;AAAA,EAEA,aAAa;AACX,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,WAAW,QAAgB,QAAiB;AAC1C,QAAI,QAAQ;AACV,aAAO,eAAA;AAAA,IACT;AAEA,SAAK,KAAK,OAAO,MAAM,MAAM,MAAM;AAAA,EACrC;AAAA,EAEA,aAAa,SAAsB,QAAiC;AAClE,YAAQ,iBAAiB,yBAAyB,EAAE,QAAQ,CAAC,QAAQ;AAClE,UAAyB,QAAQ;AAAA,IACpC,CAAC;AAED,SAAK,KAAK,OAAO,MAAM,MAAM,MAAM;AAAA,EACrC;AAAA,EAEA,MAAM,cAAc,MAAe,YAAyB;AAC1D,QAAI,MAAM;AACR,YAAM,UAAU,UAAU;AAAA,IAC5B,OAAO;AACL,YAAM,QAAQ,UAAU;AAAA,IAC1B;AAAA,EACF;AAAA,EAEA,KAAK,KAA2B;AAC9B,UAAM,MAAM,KAAK,aAAa,GAAG;AAEjC,UAAM,QAAQ,IAAI,QAAQ;AAC1B,QAAI,MAAM,IAAI,QAAQ;AACtB,QAAI,OAAO,IAAI,QAAQ;AAEvB,QAAI,OAAO;AACT,YAAM,QAAQ;AACd,aAAO,QAAQ;AAAA,IACjB;AAEA,QAAI,QAAQ,OAAO;AACjB,aAAO,KAAK,OAAO,IAAI;AAAA,IACzB;AAEA,WAAO,KAAK,OAAO,GAAG;AAAA,EACxB;AAAA;AAAA;AAAA;AAAA,EAKA,OAAO,UAAqC;AAC1C,QAAI,CAAC,UAAU;AACb,aAAO;AAAA,IACT;AAEA,QAAI,gBAAgB,KAAK,QAAQ,cAAgC,2BAA2B;AAE5F,QAAI,CAAC,eAAe;AAClB,sBAAgB,EAAE,SAAS,EAAE,MAAM,iBAAiB,MAAM,UAAU,OAAO,IAAI;AAE/E,WAAK,QAAQ,YAAY,aAAa;AAAA,IACxC;AAEA,kBAAc,QAAQ;AAEtB,WAAO,KAAK,KAAK,IAAA;AAAA,EACnB;AAAA,EAEA,aAAa,KAA2B;AACtC,WAAO,KAAK,aAAa,GAAG,KAAK;AAAA,EACnC;AAAA,EAEA,aAAa,KAAyC;AACpD,UAAM,QAAQ,IAAI,QAAQ;AAC1B,QAAI,MAAM,IAAI,QAAQ;AACtB,QAAI,OAAO,IAAI,QAAQ;AAEvB,QAAI,OAAO;AACT,YAAM,QAAQ;AACd,aAAO,QAAQ;AAAA,IACjB;AAEA,QAAI,KAAK,eAAe,KAAK,KAAK,QAAQ,GAAG;AAC3C,aAAO;AAAA,IACT,WAAW,KAAK,eAAe,MAAM,KAAK,QAAQ,GAAG;AACnD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,eAAe,GAAqB,GAA8B;AAChE,QAAI,KAAK;AACT,QAAI,KAAK;AAET,QAAI,EAAE,QAAQ,QAAQ,GAAG,EAAE,KAAA,EAAO,YAAA;AAClC,QAAI,EAAE,QAAQ,QAAQ,GAAG,EAAE,KAAA,EAAO,YAAA;AAElC,WAAO,MAAM;AAAA,EACf;AAAA;AAAA;AAAA;AAAA,EAKA,SAAS,KAAa,QAAQ,MAAY;AACxC,UAAM,KAAK,KAAK,iBAAiB,GAAG;AAEpC,QAAI,CAAC,IAAI;AACP,YAAM,IAAI,MAAM,sBAAsB,MAAM,aAAa;AAAA,IAC3D;AAEA,OAAG,UAAU;AACb,OAAG,cAAc,IAAI,MAAM,OAAO,CAAC;AACnC,OAAG,cAAc,IAAI,MAAM,QAAQ,CAAC;AAAA,EACtC;AAAA,EAEA,iBAAiB,KAAyC;AACxD,WAAO,KAAK,KAAK,SAAS;AAAA,MACxB,mDAAmD,GAAG;AAAA,IAAA;AAAA,EAE1D;AAAA;AAAA;AAAA;AAAA,EAKA,UAAU,KAAa,KAAwB,MAAsC;AACnF,UAAM,KAAK,KAAK,iBAAiB,GAAG;AAEpC,QAAI,CAAC,IAAI;AACP,aAAO;AAAA,IACT;AAEA,WAAO,KAAK,WAAW,GAAG,OAAO,KAAK,IAAI;AAAA,EAC5C;AAAA;AAAA;AAAA;AAAA,EAKA,WAAW,IAAqB,KAAwB,MAA+C;AACrG,SAAK,UAAU,KAAK;AAEpB,SAAK,qBAAA;AAEL,SAAK,KAAK,YAAY,QAAQ,EAAE;AAEhC,WAAO,KAAK,KAAK,MAAM,KAAK,IAAI;AAAA,EAClC;AAAA;AAAA;AAAA;AAAA,EAKA,iBACE,MACA,IACA,KACA,MACS;AACT,WAAO,QAAQ,CAAA;AACf,SAAK,OAAO;AAEZ,WAAO,KAAK,WAAW,IAAI,KAAK,IAAI;AAAA,EACtC;AAAA;AAAA;AAAA;AAAA,EAKA,OAAO,MAAc,IAAqB,KAAwB,MAA+C;AAC/G,WAAO,KAAK,iBAAiB,MAAM,IAAI,KAAK,IAAI;AAAA,EAClD;AAAA;AAAA;AAAA;AAAA,EAKA,gBAAgB,MAAc,KAAa,KAAwB,MAA+C;AAChH,UAAM,KAAK,KAAK,iBAAiB,GAAG;AAEpC,QAAI,CAAC,IAAI;AACP,aAAO;AAAA,IACT;AAEA,WAAO,KAAK,iBAAiB,MAAM,GAAG,OAAO,KAAK,IAAI;AAAA,EACxD;AAAA;AAAA;AAAA;AAAA,EAKA,iBAAiB,MAAc,KAAwB,MAA+C;AACpG,WAAO,QAAQ,CAAA;AACf,SAAK,OAAO;AAEZ,WAAO,KAAK,KAAK,MAAM,KAAK,IAAI;AAAA,EAClC;AAAA;AAAA;AAAA;AAAA,EAKA,SAAS,IAAqB,KAAwB,MAA+C;AACnG,SAAK,UAAU,KAAK;AAEpB,SAAK,qBAAA;AAEL,SAAK,KAAK,YAAY,QAAQ,EAAE;AAEhC,WAAO,KAAK,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA;AAAA;AAAA;AAAA,EAKA,QAAQ,KAAa,KAAwB,MAA+C;AAC1F,UAAM,KAAK,KAAK,iBAAiB,GAAG;AAEpC,QAAI,CAAC,IAAI;AACP,aAAO;AAAA,IACT;AAEA,WAAO,KAAK,SAAS,GAAG,OAAO,KAAK,IAAI;AAAA,EAC1C;AAAA;AAAA;AAAA;AAAA,EAKA,WACE,SACA,KACA,MACS;AACT,QAAI,CAAC,KAAK,mBAAmB;AAC3B,aAAO;AAAA,IACT;AAEA,cAAU,WAAW,OAAO,GAAG,gCAAgC,IAAI;AAEnE,QAAI,YAAY,OAAO;AACrB,oBAAc,OAAO,EAAE,KAAK,CAAA,cAAa;AACvC,YAAI,WAAW;AACb,eAAK,KAAK,OAAO,KAAK,IAAI;AAAA,QAC5B;AAAA,MACF,CAAC;AAAA,IACH,OAAO;AACL,WAAK,KAAK,OAAO,KAAK,IAAI;AAAA,IAC5B;AAEA,WAAO;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,UAAU,KACA,KACA,KACA,MAAwD;AACtE,UAAM,KAAK,KAAK,iBAAiB,GAAG;AAEpC,QAAI,CAAC,IAAI;AACP,aAAO;AAAA,IACT;AAEA,WAAO,KAAK,WAAW,GAAG,OAAO,KAAK,KAAK,IAAI;AAAA,EACjD;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,WAAW,IACA,KACA,KACA,MAAwD;AACvE,UAAM,OAAO,GAAG,gCAAgC;AAEhD,UAAM,YAAY,MAAM,cAAc,GAAG;AAEzC,QAAI,WAAW;AAGb,aAAO,QAAQ,CAAA;AAEf,WAAK,KAAK;AAEV,WAAK,KAAK,OAAO,KAAK,IAAI;AAAA,IAC5B;AAEA,WAAO;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKA,UAAU,OAAgB;AACxB,UAAM;AAAA,MACJ,KAAK,QAAQ,iBAAmC,+CAA+C;AAAA,IAAA,EAE9F,QAAQ,CAAC,UAAU;AAClB,YAAM,UAAU;AAEhB,YAAM,cAAc,IAAI,YAAY,OAAO,CAAC;AAC5C,YAAM,cAAc,IAAI,YAAY,QAAQ,CAAC;AAAA,IAC/C,CAAC;AAEH,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB;AACrB,UAAM;AAAA,MACJ,KAAK,QAAQ,iBAAmC,+CAA+C;AAAA,IAAA,EAE9F,QAAQ,CAAC,UAAU;AAClB,YAAM,WAAW;AAAA,IACnB,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA,EAKA,eAAuB;AACrB,WAAO,KAAK,aAAa;AAAA,EAC3B;AAAA;AAAA;AAAA;AAAA,EAKA,aAAiC;AAC/B,WAAO,MAAM;AAAA,MACX,KAAK,QAAQ,iBAAmC,uDAAuD;AAAA,IAAA;AAAA,EAE3G;AAAA,EAEA,mBAA6B;AAC3B,WAAO,KAAK,aAAa,IAAI,CAAA,UAAS,MAAM,KAAK;AAAA,EACnD;AAAA;AAAA;AAAA;AAAA,EAKA,gBAAgB,OAAe,UAA8C,KAAoB;AAC/F,UAAM,OAAO,GAAG,8BAA8B;AAE9C,QAAI,CAAC,KAAK,cAAc;AACtB,UAAI,QAAQ,IAAI;AACd,oBAAY,GAAG;AAAA,MACjB;AAEA,UAAI,OAAO;AACT,cAAM,gBAAA;AACN,cAAM,eAAA;AAAA,MACR;AAEA,aAAO;AAAA,IACT;AAEA,QAAI,UAAU;AACZ,eAAS,IAAI;AAAA,IACf;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAsB;AACpB,WAAO,KAAK,iBAAiB;AAAA,EAC/B;AAAA;AAAA;AAAA;AAAA,EAKA,WAAW,KAAwB,MAAsC;AACvE,WAAO,KAAK,iBAAiB,WAAW,KAAK,IAAI;AAAA,EACnD;AAAA;AAAA;AAAA;AAAA,EAKA,SAAS,IAAqB,OAAe,KAAwB,MAA+C;AAClH,WAAO,QAAQ,CAAA;AACf,SAAK,QAAQ;AAEb,WAAO,KAAK,iBAAiB,QAAQ,IAAI,KAAK,IAAI;AAAA,EACpD;AAAA,EAEA,OAAO,IAAqB,KAAwB,MAA+C;AACjG,WAAO,KAAK,SAAS,IAAI,IAAI,KAAK,IAAI;AAAA,EACxC;AAAA,EAEA,SAAS,IAAqB,KAAwB,MAA+C;AACnG,WAAO,KAAK,SAAS,IAAI,GAAG,KAAK,IAAI;AAAA,EACvC;AAAA,EAEA,MAAM,SAAS,IAAI;AACjB,WAAO,KAAK,KAAK,SAAS,KAAK;AAAA,EACjC;AACF;"}