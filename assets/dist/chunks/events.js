class EventMixin {
  _listeners = {};
  on(event, handler) {
    if (Array.isArray(event)) {
      for (const e of event) {
        this.on(e, handler);
      }
      return this;
    }
    this._listeners[event] ??= [];
    this._listeners[event].push(handler);
    return this;
  }
  once(event, handler) {
    handler.once = true;
    return this.on(event, handler);
  }
  off(event, handler) {
    if (handler) {
      this._listeners[event] = this.listeners(event).filter((listener) => listener !== handler);
      return this;
    }
    delete this._listeners[event];
    return this;
  }
  trigger(event, ...args) {
    if (Array.isArray(event)) {
      for (const e of event) {
        this.trigger(e);
      }
      return this;
    }
    for (const listener of this.listeners(event)) {
      listener(...args);
    }
    this._listeners[event] = this.listeners(event).filter((listener) => listener?.once !== true);
    return this;
  }
  listeners(event) {
    return this._listeners[event] === void 0 ? [] : this._listeners[event];
  }
}
export {
  EventMixin as E
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXZlbnRzLmpzIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZXZlbnRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBhYnN0cmFjdCBjbGFzcyBFdmVudE1peGluIGltcGxlbWVudHMgRXZlbnRBd2FyZUludGVyZmFjZSB7XG4gIF9saXN0ZW5lcnM6IFJlY29yZDxzdHJpbmcsIEV2ZW50SGFuZGxlcltdPiA9IHt9O1xuXG4gIG9uKGV2ZW50OiBzdHJpbmcgfCBzdHJpbmdbXSwgaGFuZGxlcjogRXZlbnRIYW5kbGVyKTogdGhpcyB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnQpKSB7XG4gICAgICBmb3IgKGNvbnN0IGUgb2YgZXZlbnQpIHtcbiAgICAgICAgdGhpcy5vbihlLCBoYW5kbGVyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHRoaXMuX2xpc3RlbmVyc1tldmVudF0gPz89IFtdO1xuXG4gICAgdGhpcy5fbGlzdGVuZXJzW2V2ZW50XS5wdXNoKGhhbmRsZXIpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBvbmNlKGV2ZW50OiBzdHJpbmcgfCBzdHJpbmdbXSwgaGFuZGxlcjogRXZlbnRIYW5kbGVyKTogdGhpcyB7XG4gICAgaGFuZGxlci5vbmNlID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcy5vbihldmVudCwgaGFuZGxlcik7XG4gIH1cblxuICBvZmYoZXZlbnQ6IHN0cmluZywgaGFuZGxlcj86IEV2ZW50SGFuZGxlcik6IHRoaXMge1xuICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnNbZXZlbnRdID0gdGhpcy5saXN0ZW5lcnMoZXZlbnQpLmZpbHRlcigobGlzdGVuZXIpID0+IGxpc3RlbmVyICE9PSBoYW5kbGVyKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGRlbGV0ZSB0aGlzLl9saXN0ZW5lcnNbZXZlbnRdO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB0cmlnZ2VyKGV2ZW50OiBzdHJpbmcgfCBzdHJpbmdbXSwgLi4uYXJnczogYW55W10pOiB0aGlzIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShldmVudCkpIHtcbiAgICAgIGZvciAoY29uc3QgZSBvZiBldmVudCkge1xuICAgICAgICB0aGlzLnRyaWdnZXIoZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMubGlzdGVuZXJzKGV2ZW50KSkge1xuICAgICAgbGlzdGVuZXIoLi4uYXJncyk7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIG9uY2VcbiAgICB0aGlzLl9saXN0ZW5lcnNbZXZlbnRdID0gdGhpcy5saXN0ZW5lcnMoZXZlbnQpLmZpbHRlcigobGlzdGVuZXIpID0+IGxpc3RlbmVyPy5vbmNlICE9PSB0cnVlKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgbGlzdGVuZXJzKGV2ZW50OiBzdHJpbmcpOiBFdmVudEhhbmRsZXJbXSB7XG4gICAgcmV0dXJuIHRoaXMuX2xpc3RlbmVyc1tldmVudF0gPT09IHVuZGVmaW5lZCA/IFtdIDogdGhpcy5fbGlzdGVuZXJzW2V2ZW50XTtcbiAgfVxufVxuXG4vLyBleHBvcnQgY2xhc3MgRXZlbnRCdXMgZXh0ZW5kcyBNaXhpbihFdmVudE1peGluKSB7XG4vLyB9XG5cbmV4cG9ydCB0eXBlIEV2ZW50SGFuZGxlciA9ICgoLi4uZXZlbnQ6IGFueVtdKSA9PiB2b2lkKSAmIHsgb25jZT86IGJvb2xlYW4gfTtcblxuZXhwb3J0IGludGVyZmFjZSBFdmVudEF3YXJlSW50ZXJmYWNlIHtcbiAgb24oZXZlbnQ6IHN0cmluZyB8IHN0cmluZ1tdLCBoYW5kbGVyOiBFdmVudEhhbmRsZXIpOiB0aGlzO1xuXG4gIG9uY2UoZXZlbnQ6IHN0cmluZyB8IHN0cmluZ1tdLCBoYW5kbGVyOiBFdmVudEhhbmRsZXIpOiB0aGlzO1xuXG4gIG9mZihldmVudDogc3RyaW5nLCBoYW5kbGVyPzogRXZlbnRIYW5kbGVyKTogdGhpcztcblxuICB0cmlnZ2VyKGV2ZW50OiBzdHJpbmcgfCBzdHJpbmdbXSwgLi4uYXJnczogYW55W10pOiB0aGlzO1xuXG4gIGxpc3RlbmVycyhldmVudDogc3RyaW5nKTogRXZlbnRIYW5kbGVyW107XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQU8sTUFBZSxXQUEwQztBQUFBLEVBQzlELGFBQTZDLENBQUE7QUFBQSxFQUU3QyxHQUFHLE9BQTBCLFNBQTZCO0FBQ3hELFFBQUksTUFBTSxRQUFRLEtBQUssR0FBRztBQUN4QixpQkFBVyxLQUFLLE9BQU87QUFDckIsYUFBSyxHQUFHLEdBQUcsT0FBTztBQUFBLE1BQ3BCO0FBQ0EsYUFBTztBQUFBLElBQ1Q7QUFFQSxTQUFLLFdBQVcsS0FBSyxNQUFNLENBQUE7QUFFM0IsU0FBSyxXQUFXLEtBQUssRUFBRSxLQUFLLE9BQU87QUFFbkMsV0FBTztBQUFBLEVBQ1Q7QUFBQSxFQUVBLEtBQUssT0FBMEIsU0FBNkI7QUFDMUQsWUFBUSxPQUFPO0FBQ2YsV0FBTyxLQUFLLEdBQUcsT0FBTyxPQUFPO0FBQUEsRUFDL0I7QUFBQSxFQUVBLElBQUksT0FBZSxTQUE4QjtBQUMvQyxRQUFJLFNBQVM7QUFDWCxXQUFLLFdBQVcsS0FBSyxJQUFJLEtBQUssVUFBVSxLQUFLLEVBQUUsT0FBTyxDQUFDLGFBQWEsYUFBYSxPQUFPO0FBQ3hGLGFBQU87QUFBQSxJQUNUO0FBRUEsV0FBTyxLQUFLLFdBQVcsS0FBSztBQUU1QixXQUFPO0FBQUEsRUFDVDtBQUFBLEVBRUEsUUFBUSxVQUE2QixNQUFtQjtBQUN0RCxRQUFJLE1BQU0sUUFBUSxLQUFLLEdBQUc7QUFDeEIsaUJBQVcsS0FBSyxPQUFPO0FBQ3JCLGFBQUssUUFBUSxDQUFDO0FBQUEsTUFDaEI7QUFDQSxhQUFPO0FBQUEsSUFDVDtBQUVBLGVBQVcsWUFBWSxLQUFLLFVBQVUsS0FBSyxHQUFHO0FBQzVDLGVBQVMsR0FBRyxJQUFJO0FBQUEsSUFDbEI7QUFHQSxTQUFLLFdBQVcsS0FBSyxJQUFJLEtBQUssVUFBVSxLQUFLLEVBQUUsT0FBTyxDQUFDLGFBQWEsVUFBVSxTQUFTLElBQUk7QUFFM0YsV0FBTztBQUFBLEVBQ1Q7QUFBQSxFQUVBLFVBQVUsT0FBK0I7QUFDdkMsV0FBTyxLQUFLLFdBQVcsS0FBSyxNQUFNLFNBQVksS0FBSyxLQUFLLFdBQVcsS0FBSztBQUFBLEVBQzFFO0FBQ0Y7In0=
