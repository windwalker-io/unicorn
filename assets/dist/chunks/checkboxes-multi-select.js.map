{"version":3,"file":"checkboxes-multi-select.js","sources":["../../src/module/checkboxes-multi-select.ts"],"sourcesContent":["import { selectAll, selectOne } from '../service';\r\n\r\nexport class CheckboxesMultiSelect {\r\n  defaultOptions = {\r\n    duration: 100,\r\n    inputSelector: 'input[type=checkbox][data-role=grid-checkbox]'\r\n  }\r\n\r\n  $element: HTMLElement;\r\n  options: any;\r\n  boxes: HTMLInputElement[];\r\n  last: HTMLInputElement | false = false;\r\n\r\n  static handle(selector: any, options: any = {}) {\r\n    return selectAll(selector, (ele: any) => new this(ele, options));\r\n  }\r\n\r\n  constructor(selector: any, options = {}) {\r\n    this.$element = selectOne<HTMLElement>(selector)!;\r\n    this.options = Object.assign({}, this.defaultOptions, options);\r\n    this.boxes = Array.from(this.$element.querySelectorAll(this.options.inputSelector));\r\n    this.last = false;\r\n\r\n    selectAll(this.boxes, (box: HTMLInputElement) => {\r\n      box.addEventListener('click', (e: MouseEvent) => {\r\n        this.select(box, e);\r\n      });\r\n    });\r\n  }\r\n\r\n  select(box: HTMLInputElement, event: MouseEvent) {\r\n    if (!this.last) {\r\n      this.last = box;\r\n\r\n      return;\r\n    }\r\n\r\n    if (event.shiftKey) {\r\n      // @ts-ignore\r\n      const start = [].indexOf.call(this.boxes, box);\r\n\r\n      // @ts-ignore\r\n      const end = [].indexOf.call(this.boxes, this.last);\r\n\r\n      const chs = [].slice.call(this.boxes, Math.min(start, end), Math.max(start, end) + 1);\r\n\r\n      [].forEach.call(chs, (ele: HTMLInputElement, i) => {\r\n        ele.checked = (this.last as HTMLInputElement).checked;\r\n      });\r\n    }\r\n\r\n    this.last = box;\r\n  }\r\n}\r\n"],"names":[],"mappings":";AAEO,MAAM,sBAAsB;AAAA,EACjC,iBAAiB;AAAA,IACf,UAAU;AAAA,IACV,eAAe;AAAA,EAAA;AAAA,EAGjB;AAAA,EACA;AAAA,EACA;AAAA,EACA,OAAiC;AAAA,EAEjC,OAAO,OAAO,UAAe,UAAe,IAAI;AAC9C,WAAO,UAAU,UAAU,CAAC,QAAa,IAAI,KAAK,KAAK,OAAO,CAAC;AAAA,EACjE;AAAA,EAEA,YAAY,UAAe,UAAU,IAAI;AACvC,SAAK,WAAW,UAAuB,QAAQ;AAC/C,SAAK,UAAU,OAAO,OAAO,CAAA,GAAI,KAAK,gBAAgB,OAAO;AAC7D,SAAK,QAAQ,MAAM,KAAK,KAAK,SAAS,iBAAiB,KAAK,QAAQ,aAAa,CAAC;AAClF,SAAK,OAAO;AAEZ,cAAU,KAAK,OAAO,CAAC,QAA0B;AAC/C,UAAI,iBAAiB,SAAS,CAAC,MAAkB;AAC/C,aAAK,OAAO,KAAK,CAAC;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,KAAuB,OAAmB;AAC/C,QAAI,CAAC,KAAK,MAAM;AACd,WAAK,OAAO;AAEZ;AAAA,IACF;AAEA,QAAI,MAAM,UAAU;AAElB,YAAM,QAAQ,CAAA,EAAG,QAAQ,KAAK,KAAK,OAAO,GAAG;AAG7C,YAAM,MAAM,CAAA,EAAG,QAAQ,KAAK,KAAK,OAAO,KAAK,IAAI;AAEjD,YAAM,MAAM,CAAA,EAAG,MAAM,KAAK,KAAK,OAAO,KAAK,IAAI,OAAO,GAAG,GAAG,KAAK,IAAI,OAAO,GAAG,IAAI,CAAC;AAEpF,OAAA,EAAG,QAAQ,KAAK,KAAK,CAAC,KAAuB,MAAM;AACjD,YAAI,UAAW,KAAK,KAA0B;AAAA,MAChD,CAAC;AAAA,IACH;AAEA,SAAK,OAAO;AAAA,EACd;AACF;"}