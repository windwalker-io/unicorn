{"version":3,"file":"ui-bootstrap5.js","sources":["../../src/module/ui-bootstrap5.ts"],"sourcesContent":["import * as bootstrap from 'bootstrap';\r\nimport { Tooltip } from 'bootstrap';\r\nimport type { ButtonRadio, ButtonRadioModule, ButtonRadioOptions } from '../bootstrap/button-radio';\r\nimport type { KeepTab, KeepTabModule, KeepTabOptions } from '../bootstrap/keep-tab';\r\nimport { getBoundedInstanceList, html, selectAll, selectOne } from '../service';\r\nimport type { UIThemeInterface } from '../types';\r\n\r\nexport class UIBootstrap5 implements UIThemeInterface {\r\n  static instance: UIBootstrap5 | null = null;\r\n\r\n  bootstrap = bootstrap;\r\n\r\n  static get() {\r\n    return this.instance ??= new this();\r\n  }\r\n\r\n  renderMessage(messages: string | string[], type: string = 'info') {\r\n    if (!Array.isArray(messages)) {\r\n      messages = [messages];\r\n    }\r\n\r\n    let text = '';\r\n\r\n    messages.forEach((msg) => {\r\n      text += `<div class=\"\">${msg}</div>`;\r\n    });\r\n\r\n    const msgHtml = html(`<div class=\"alert alert-${type} alert-dismissible fade show\" role=\"alert\">\r\n  ${text}\r\n  <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\" aria-label=\"Close\"></button>\r\n</div>`);\r\n\r\n    const container = selectOne('.c-messages-container');\r\n\r\n    if (container) {\r\n      container.appendChild(msgHtml);\r\n    }\r\n  }\r\n\r\n  clearMessages() {\r\n    const container = selectOne('.c-messages-container');\r\n\r\n    if (container) {\r\n      container.innerHTML = '';\r\n    }\r\n  }\r\n\r\n  async keepTab(): Promise<KeepTabModule>;\r\n  async keepTab(selector?: string | HTMLElement, options?: KeepTabOptions): Promise<KeepTab>;\r\n  async keepTab(selector?: string | HTMLElement, options: KeepTabOptions = {}): Promise<any> {\r\n    const module = await import('../bootstrap/keep-tab');\r\n\r\n    await module.ready;\r\n\r\n    if (selector) {\r\n      return new module.KeepTab(selector, options);\r\n    }\r\n\r\n    return module;\r\n  }\r\n\r\n  async buttonRadio(): Promise<ButtonRadioModule>;\r\n  async buttonRadio(selector?: string | HTMLElement, options?: ButtonRadioOptions): Promise<ButtonRadio>;\r\n  async buttonRadio(selector?: string | HTMLElement, options: ButtonRadioOptions = {}): Promise<any> {\r\n    const m = await import('../bootstrap/button-radio');\r\n\r\n    await m.ready;\r\n\r\n    if (selector) {\r\n      return m.ButtonRadio.handle(selector, options);\r\n    }\r\n\r\n    return m;\r\n  }\r\n\r\n  tooltip(\r\n    selector: NodeListOf<Element> | Element | string = '[data-bs-toggle=\"tooltip\"]',\r\n    config: Partial<Tooltip.Options> = {}\r\n  ): Tooltip[] {\r\n    return this.selectAsArray(selector)\r\n      .map((ele) => Tooltip.getOrCreateInstance(ele, config));\r\n  }\r\n\r\n  protected selectAsArray(selector: NodeListOf<Element> | Element | string) {\r\n    if (selector instanceof NodeList) {\r\n      return Array.from(selector);\r\n    } else if (typeof selector === 'string') {\r\n      return selectAll(selector);\r\n    } else {\r\n      return [selector];\r\n    }\r\n  }\r\n\r\n  getMajorVersion(module: any) {\r\n    return Number(module.VERSION.split('.').shift());\r\n  }\r\n\r\n  pushBootstrapToGlobal() {\r\n    window.bootstrap = bootstrap;\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  export interface Window {\r\n    bootstrap: typeof bootstrap;\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAOO,MAAM,aAAyC;AAAA,EACpD,OAAO,WAAgC;AAAA,EAEvC,YAAY;AAAA,EAEZ,OAAO,MAAM;AACX,WAAO,KAAK,aAAa,IAAI,KAAA;AAAA,EAC/B;AAAA,EAEA,cAAc,UAA6B,OAAe,QAAQ;AAChE,QAAI,CAAC,MAAM,QAAQ,QAAQ,GAAG;AAC5B,iBAAW,CAAC,QAAQ;AAAA,IACtB;AAEA,QAAI,OAAO;AAEX,aAAS,QAAQ,CAAC,QAAQ;AACxB,cAAQ,iBAAiB,GAAG;AAAA,IAC9B,CAAC;AAED,UAAM,UAAU,KAAK,2BAA2B,IAAI;AAAA,IACpD,IAAI;AAAA;AAAA,OAED;AAEH,UAAM,YAAY,UAAU,uBAAuB;AAEnD,QAAI,WAAW;AACb,gBAAU,YAAY,OAAO;AAAA,IAC/B;AAAA,EACF;AAAA,EAEA,gBAAgB;AACd,UAAM,YAAY,UAAU,uBAAuB;AAEnD,QAAI,WAAW;AACb,gBAAU,YAAY;AAAA,IACxB;AAAA,EACF;AAAA,EAIA,MAAM,QAAQ,UAAiC,UAA0B,IAAkB;AACzF,UAAM,SAAS,MAAM,OAAO,eAAuB;AAEnD,UAAM,OAAO;AAEb,QAAI,UAAU;AACZ,aAAO,IAAI,OAAO,QAAQ,UAAU,OAAO;AAAA,IAC7C;AAEA,WAAO;AAAA,EACT;AAAA,EAIA,MAAM,YAAY,UAAiC,UAA8B,IAAkB;AACjG,UAAM,IAAI,MAAM,OAAO,mBAA2B;AAElD,UAAM,EAAE;AAER,QAAI,UAAU;AACZ,aAAO,EAAE,YAAY,OAAO,UAAU,OAAO;AAAA,IAC/C;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,QACE,WAAmD,8BACnD,SAAmC,CAAA,GACxB;AACX,WAAO,KAAK,cAAc,QAAQ,EAC/B,IAAI,CAAC,QAAQ,QAAQ,oBAAoB,KAAK,MAAM,CAAC;AAAA,EAC1D;AAAA,EAEU,cAAc,UAAkD;AACxE,QAAI,oBAAoB,UAAU;AAChC,aAAO,MAAM,KAAK,QAAQ;AAAA,IAC5B,WAAW,OAAO,aAAa,UAAU;AACvC,aAAO,UAAU,QAAQ;AAAA,IAC3B,OAAO;AACL,aAAO,CAAC,QAAQ;AAAA,IAClB;AAAA,EACF;AAAA,EAEA,gBAAgB,QAAa;AAC3B,WAAO,OAAO,OAAO,QAAQ,MAAM,GAAG,EAAE,OAAO;AAAA,EACjD;AAAA,EAEA,wBAAwB;AACtB,WAAO,YAAY;AAAA,EACrB;AACF;"}