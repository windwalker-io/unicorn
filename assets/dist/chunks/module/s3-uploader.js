import { d as data } from "../data.js";
import { E as EventMixin } from "../events.js";
import { M as Mixin } from "../app.js";
import { m as mergeDeep } from "../utilities/arr.js";
import { u as useHttpClient } from "../composable/useHttp.js";
const instances = {};
function get(name, options = {}) {
  return instances[name] ??= create(name, options);
}
function create(name, options = {}) {
  return new S3Uploader(name, options);
}
function destroy(name) {
  delete instances[name];
}
const defaultOptions = {
  endpoint: "",
  subfolder: "",
  viewerHost: "",
  starts_with: [],
  formInputs: {
    acl: "",
    bucket: "",
    key: "",
    Policy: "",
    "X-Amz-Algorithm": "",
    "X-Amz-Credential": "",
    "X-Amz-Date": "",
    "X-Amz-Signature": ""
  }
};
class S3Uploader extends (/* @__PURE__ */ Mixin(EventMixin)) {
  constructor(name, options = {}) {
    super();
    this.name = name;
    const awsOptions = data("@s3.uploader." + name) || {};
    this.options = mergeDeep({}, defaultOptions, awsOptions, options);
  }
  options;
  http;
  async getHttpClient() {
    return this.http ??= await useHttpClient();
  }
  /**
   * Do upload.
   */
  async upload(file, path, options = {}) {
    const httpClient = await this.getHttpClient();
    const fileData = new FormData();
    const inputs = mergeDeep({}, this.options.formInputs, options.formInputs || {});
    if (typeof file === "string") {
      file = new Blob([file], { type: options["Content-Type"] || "text/plain" });
    }
    if (file instanceof Blob && path.endsWith(".{ext}")) {
      throw new Error("If using Blob or file data string, you must provide a valid file extension in the path.");
    }
    if (file instanceof Blob || file instanceof File) {
      options["Content-Type"] = options["Content-Type"] || file.type;
    }
    if (options["filename"]) {
      const filename = this.replaceExt(options["filename"], file);
      options["Content-Disposition"] = "attachment; filename*=UTF-8''" + encodeURIComponent(filename);
    }
    path = this.replaceExt(path, file);
    options["key"] = trimSlashes(this.options.subfolder || "") + "/" + trimSlashes(path);
    options["key"] = trimSlashes(options["key"]);
    options["Content-Type"] = options["Content-Type"] || void 0;
    options["Content-Disposition"] = options["Content-Disposition"] || void 0;
    for (let key in inputs) {
      fileData.set(key, inputs[key]);
    }
    for (let key of Object.keys(this.options.starts_with)) {
      if (options[key]) {
        fileData.set(key, options[key]);
      }
    }
    fileData.append("file", file);
    this.trigger("start", fileData);
    try {
      let res = await httpClient.post(
        this.options.endpoint || "",
        fileData,
        {
          onUploadProgress: (e) => {
            if (options.onUploadProgress) {
              options.onUploadProgress(e);
            }
            this.trigger("upload-progress", e);
            if (e.total != null) {
              this.trigger("progress", e.loaded / e.total, e);
            }
          }
        }
      );
      const url = this.options.viewerHost + "/" + trimSlashes(path);
      this.trigger("success", url, res);
      res.url = url;
      return res;
    } finally {
      this.trigger("end");
    }
  }
  replaceExt(path, file) {
    if (file instanceof File) {
      const fileExt = file.name.split(".").pop();
      if (path.endsWith(".{ext}")) {
        return path.replace(/\.{ext}$/, fileExt ? "." + fileExt : "");
      }
    }
    return path;
  }
  on(event, handler) {
    return super.on(event, handler);
  }
  onStart(handler) {
    return this.on("start", handler);
  }
  onSuccess(handler) {
    return this.on("success", handler);
  }
  onEnd(handler) {
    return this.on("end", handler);
  }
  onProgress(handler) {
    return this.on("upload-progress", handler);
  }
  onProgressWithTotal(handler) {
    return this.on("progress", handler);
  }
}
function trimSlashes(str) {
  return str.replace(/^\/+|\/+$/g, "");
}
export {
  S3Uploader,
  create,
  destroy,
  get
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiczMtdXBsb2FkZXIuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tb2R1bGUvczMtdXBsb2FkZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlSHR0cENsaWVudCB9IGZyb20gJy4uL2NvbXBvc2FibGUnO1xyXG5pbXBvcnQgeyBkYXRhIH0gZnJvbSAnLi4vZGF0YSc7XHJcbmltcG9ydCB7IEV2ZW50QXdhcmVJbnRlcmZhY2UsIEV2ZW50SGFuZGxlciwgRXZlbnRNaXhpbiB9IGZyb20gJy4uL2V2ZW50cyc7XHJcbmltcG9ydCB0eXBlIHsgVW5pY29ybkh0dHBDbGllbnQgfSBmcm9tICcuL2h0dHAtY2xpZW50JztcclxuaW1wb3J0IHsgbWVyZ2VEZWVwIH0gZnJvbSAnLi4vdXRpbGl0aWVzJztcclxuaW1wb3J0IHsgQXhpb3NQcm9ncmVzc0V2ZW50LCBBeGlvc1Jlc3BvbnNlIH0gZnJvbSAnYXhpb3MnO1xyXG5pbXBvcnQgeyBNaXhpbiB9IGZyb20gJ3RzLW1peGVyJztcclxuXHJcbmNvbnN0IGluc3RhbmNlczogUmVjb3JkPHN0cmluZywgUzNVcGxvYWRlcj4gPSB7fTtcclxuZXhwb3J0IGZ1bmN0aW9uIGdldChuYW1lOiBzdHJpbmcsIG9wdGlvbnM/OiBQYXJ0aWFsPFMzVXBsb2FkZXJHbG9iYWxPcHRpb25zPik6IFMzVXBsb2FkZXI7XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXQoXHJcbiAgbmFtZTogc3RyaW5nLFxyXG4gIG9wdGlvbnM6IFBhcnRpYWw8UzNVcGxvYWRlckdsb2JhbE9wdGlvbnM+ID0ge31cclxuKTogUzNVcGxvYWRlciB8IHZvaWQge1xyXG4gIHJldHVybiBpbnN0YW5jZXNbbmFtZV0gPz89IGNyZWF0ZShuYW1lLCBvcHRpb25zKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZShuYW1lOiBzdHJpbmcsIG9wdGlvbnM6IFBhcnRpYWw8UzNVcGxvYWRlckdsb2JhbE9wdGlvbnM+ID0ge30pOiBTM1VwbG9hZGVyIHtcclxuICByZXR1cm4gbmV3IFMzVXBsb2FkZXIobmFtZSwgb3B0aW9ucyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZXN0cm95KG5hbWU6IHN0cmluZykge1xyXG4gIGRlbGV0ZSBpbnN0YW5jZXNbbmFtZV07XHJcbn1cclxuXHJcbmNvbnN0IGRlZmF1bHRPcHRpb25zOiBTM1VwbG9hZGVyR2xvYmFsT3B0aW9ucyA9IHtcclxuICBlbmRwb2ludDogJycsXHJcbiAgc3ViZm9sZGVyOiAnJyxcclxuICB2aWV3ZXJIb3N0OiAnJyxcclxuICBzdGFydHNfd2l0aDogW10sXHJcbiAgZm9ybUlucHV0czoge1xyXG4gICAgYWNsOiAnJyxcclxuICAgIGJ1Y2tldDogJycsXHJcbiAgICBrZXk6ICcnLFxyXG4gICAgUG9saWN5OiAnJyxcclxuICAgICdYLUFtei1BbGdvcml0aG0nOiAnJyxcclxuICAgICdYLUFtei1DcmVkZW50aWFsJzogJycsXHJcbiAgICAnWC1BbXotRGF0ZSc6ICcnLFxyXG4gICAgJ1gtQW16LVNpZ25hdHVyZSc6ICcnLFxyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBTM1VwbG9hZGVyIGV4dGVuZHMgTWl4aW4oRXZlbnRNaXhpbikgaW1wbGVtZW50cyBFdmVudEF3YXJlSW50ZXJmYWNlIHtcclxuICBvcHRpb25zOiBTM1VwbG9hZGVyR2xvYmFsT3B0aW9ucztcclxuICBodHRwPzogVW5pY29ybkh0dHBDbGllbnQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBuYW1lOiBzdHJpbmcsIG9wdGlvbnM6IFBhcnRpYWw8UzNVcGxvYWRlckdsb2JhbE9wdGlvbnM+ID0ge30pIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgY29uc3QgYXdzT3B0aW9ucyA9IGRhdGEoJ0BzMy51cGxvYWRlci4nICsgbmFtZSkgfHwge307XHJcblxyXG4gICAgdGhpcy5vcHRpb25zID0gbWVyZ2VEZWVwPFMzVXBsb2FkZXJHbG9iYWxPcHRpb25zPih7fSwgZGVmYXVsdE9wdGlvbnMsIGF3c09wdGlvbnMsIG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0SHR0cENsaWVudCgpIHtcclxuICAgIHJldHVybiB0aGlzLmh0dHAgPz89IGF3YWl0IHVzZUh0dHBDbGllbnQoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERvIHVwbG9hZC5cclxuICAgKi9cclxuICBhc3luYyB1cGxvYWQoXHJcbiAgICBmaWxlOiBzdHJpbmcgfCBGaWxlIHwgQmxvYixcclxuICAgIHBhdGg6IHN0cmluZyxcclxuICAgIG9wdGlvbnM6IFBhcnRpYWw8UzNVcGxvYWRlclJlcXVlc3RPcHRpb25zPiA9IHt9XHJcbiAgKTogUHJvbWlzZTxTM1VwbG9hZGVyUmVzcG9uc2U+IHtcclxuICAgIGNvbnN0IGh0dHBDbGllbnQgPSBhd2FpdCB0aGlzLmdldEh0dHBDbGllbnQoKTtcclxuXHJcbiAgICBjb25zdCBmaWxlRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgY29uc3QgaW5wdXRzID0gbWVyZ2VEZWVwKHt9LCB0aGlzLm9wdGlvbnMuZm9ybUlucHV0cywgb3B0aW9ucy5mb3JtSW5wdXRzIHx8IHt9KTtcclxuXHJcbiAgICBpZiAodHlwZW9mIGZpbGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIGZpbGUgPSBuZXcgQmxvYihbZmlsZV0sIHsgdHlwZTogb3B0aW9uc1snQ29udGVudC1UeXBlJ10gfHwgJ3RleHQvcGxhaW4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChmaWxlIGluc3RhbmNlb2YgQmxvYiAmJiBwYXRoLmVuZHNXaXRoKCcue2V4dH0nKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lmIHVzaW5nIEJsb2Igb3IgZmlsZSBkYXRhIHN0cmluZywgeW91IG11c3QgcHJvdmlkZSBhIHZhbGlkIGZpbGUgZXh0ZW5zaW9uIGluIHRoZSBwYXRoLicpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICgoZmlsZSBpbnN0YW5jZW9mIEJsb2IpIHx8IChmaWxlIGFzIGFueSkgaW5zdGFuY2VvZiBGaWxlKSB7XHJcbiAgICAgIG9wdGlvbnNbJ0NvbnRlbnQtVHlwZSddID0gb3B0aW9uc1snQ29udGVudC1UeXBlJ10gfHwgZmlsZS50eXBlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvcHRpb25zWydmaWxlbmFtZSddKSB7XHJcbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gdGhpcy5yZXBsYWNlRXh0KG9wdGlvbnNbJ2ZpbGVuYW1lJ10sIGZpbGUpO1xyXG4gICAgICBvcHRpb25zWydDb250ZW50LURpc3Bvc2l0aW9uJ10gPSAnYXR0YWNobWVudDsgZmlsZW5hbWUqPVVURi04XFwnXFwnJyArIGVuY29kZVVSSUNvbXBvbmVudChmaWxlbmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcGF0aCA9IHRoaXMucmVwbGFjZUV4dChwYXRoLCBmaWxlKTtcclxuXHJcbiAgICBvcHRpb25zWydrZXknXSA9IHRyaW1TbGFzaGVzKHRoaXMub3B0aW9ucy5zdWJmb2xkZXIgfHwgJycpICsgJy8nXHJcbiAgICAgICsgdHJpbVNsYXNoZXMocGF0aCk7XHJcbiAgICBvcHRpb25zWydrZXknXSA9IHRyaW1TbGFzaGVzKG9wdGlvbnNbJ2tleSddKTtcclxuICAgIG9wdGlvbnNbJ0NvbnRlbnQtVHlwZSddID0gb3B0aW9uc1snQ29udGVudC1UeXBlJ10gfHwgdW5kZWZpbmVkO1xyXG4gICAgb3B0aW9uc1snQ29udGVudC1EaXNwb3NpdGlvbiddID0gb3B0aW9uc1snQ29udGVudC1EaXNwb3NpdGlvbiddIHx8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAvLyBQcmVwYXJlIHByZS1zaWduZWQgZGF0YVxyXG4gICAgZm9yIChsZXQga2V5IGluIGlucHV0cykge1xyXG4gICAgICBmaWxlRGF0YS5zZXQoa2V5LCBpbnB1dHNba2V5XSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUHJlcGFyZSBjdXN0b20gZGF0YVxyXG4gICAgZm9yIChsZXQga2V5IG9mIE9iamVjdC5rZXlzKHRoaXMub3B0aW9ucy5zdGFydHNfd2l0aCkpIHtcclxuICAgICAgaWYgKG9wdGlvbnNba2V5XSkge1xyXG4gICAgICAgIGZpbGVEYXRhLnNldChrZXksIG9wdGlvbnNba2V5XSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmaWxlRGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcclxuXHJcbiAgICB0aGlzLnRyaWdnZXIoJ3N0YXJ0JywgZmlsZURhdGEpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGxldCByZXMgPSBhd2FpdCBodHRwQ2xpZW50LnBvc3QoXHJcbiAgICAgICAgdGhpcy5vcHRpb25zLmVuZHBvaW50IHx8ICcnLFxyXG4gICAgICAgIGZpbGVEYXRhLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIG9uVXBsb2FkUHJvZ3Jlc3M6IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLm9uVXBsb2FkUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgICBvcHRpb25zLm9uVXBsb2FkUHJvZ3Jlc3MoZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcigndXBsb2FkLXByb2dyZXNzJywgZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZS50b3RhbCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdwcm9ncmVzcycsIGUubG9hZGVkIC8gZS50b3RhbCwgZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICkgYXMgUzNVcGxvYWRlclJlc3BvbnNlO1xyXG5cclxuICAgICAgY29uc3QgdXJsID0gdGhpcy5vcHRpb25zLnZpZXdlckhvc3QgKyAnLydcclxuICAgICAgICArIHRyaW1TbGFzaGVzKHBhdGgpO1xyXG5cclxuICAgICAgdGhpcy50cmlnZ2VyKCdzdWNjZXNzJywgdXJsLCByZXMpO1xyXG5cclxuICAgICAgcmVzLnVybCA9IHVybDtcclxuXHJcbiAgICAgIHJldHVybiByZXM7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICB0aGlzLnRyaWdnZXIoJ2VuZCcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVwbGFjZUV4dChwYXRoOiBzdHJpbmcsIGZpbGU6IEZpbGUgfCBCbG9iKTogc3RyaW5nIHtcclxuICAgIGlmIChmaWxlIGluc3RhbmNlb2YgRmlsZSkge1xyXG4gICAgICBjb25zdCBmaWxlRXh0ID0gZmlsZS5uYW1lLnNwbGl0KCcuJykucG9wKCk7XHJcblxyXG4gICAgICBpZiAocGF0aC5lbmRzV2l0aCgnLntleHR9JykpIHtcclxuICAgICAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9cXC57ZXh0fSQvLCBmaWxlRXh0ID8gJy4nICsgZmlsZUV4dCA6ICcnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBwYXRoO1xyXG4gIH1cclxuXHJcbiAgb24oZXZlbnQ6ICdzdGFydCcsIGhhbmRsZXI6IFN0YXJ0RXZlbnRIYW5kbGVyKTogdGhpcztcclxuICBvbihldmVudDogJ3N1Y2Nlc3MnLCBoYW5kbGVyOiBTdWNjZXNzRXZlbnRIYW5kbGVyKTogdGhpcztcclxuICBvbihldmVudDogJ2VuZCcsIGhhbmRsZXI6IEVuZEV2ZW50SGFuZGxlcik6IHRoaXM7XHJcbiAgb24oZXZlbnQ6ICd1cGxvYWQtcHJvZ3Jlc3MnLCBoYW5kbGVyOiBVcGxvYWRQcm9ncmVzc0V2ZW50SGFuZGxlcik6IHRoaXM7XHJcbiAgb24oZXZlbnQ6ICdwcm9ncmVzcycsIGhhbmRsZXI6IFByb2dyZXNzRXZlbnRIYW5kbGVyKTogdGhpcztcclxuICBvbihldmVudDogc3RyaW5nIHwgc3RyaW5nW10sIGhhbmRsZXI6IEV2ZW50SGFuZGxlcik6IHRoaXMge1xyXG4gICAgcmV0dXJuIHN1cGVyLm9uKGV2ZW50LCBoYW5kbGVyKTtcclxuICB9XHJcblxyXG4gIG9uU3RhcnQoaGFuZGxlcjogU3RhcnRFdmVudEhhbmRsZXIpOiB0aGlzIHtcclxuICAgIHJldHVybiB0aGlzLm9uKCdzdGFydCcsIGhhbmRsZXIpO1xyXG4gIH1cclxuXHJcbiAgb25TdWNjZXNzKGhhbmRsZXI6IFN1Y2Nlc3NFdmVudEhhbmRsZXIpOiB0aGlzIHtcclxuICAgIHJldHVybiB0aGlzLm9uKCdzdWNjZXNzJywgaGFuZGxlcik7XHJcbiAgfVxyXG5cclxuICBvbkVuZChoYW5kbGVyOiBFbmRFdmVudEhhbmRsZXIpOiB0aGlzIHtcclxuICAgIHJldHVybiB0aGlzLm9uKCdlbmQnLCBoYW5kbGVyKTtcclxuICB9XHJcblxyXG4gIG9uUHJvZ3Jlc3MoaGFuZGxlcjogVXBsb2FkUHJvZ3Jlc3NFdmVudEhhbmRsZXIpOiB0aGlzIHtcclxuICAgIHJldHVybiB0aGlzLm9uKCd1cGxvYWQtcHJvZ3Jlc3MnLCBoYW5kbGVyKTtcclxuICB9XHJcblxyXG4gIG9uUHJvZ3Jlc3NXaXRoVG90YWwoaGFuZGxlcjogUHJvZ3Jlc3NFdmVudEhhbmRsZXIpOiB0aGlzIHtcclxuICAgIHJldHVybiB0aGlzLm9uKCdwcm9ncmVzcycsIGhhbmRsZXIpO1xyXG4gIH1cclxufVxyXG5cclxudHlwZSBFbmRFdmVudEhhbmRsZXIgPSAoKSA9PiB2b2lkO1xyXG50eXBlIFN1Y2Nlc3NFdmVudEhhbmRsZXIgPSAodXJsOiBzdHJpbmcsIHJlczogUzNVcGxvYWRlclJlc3BvbnNlKSA9PiB2b2lkO1xyXG50eXBlIFN0YXJ0RXZlbnRIYW5kbGVyID0gKGZpbGVEYXRhOiBGb3JtRGF0YSkgPT4gdm9pZDtcclxudHlwZSBVcGxvYWRQcm9ncmVzc0V2ZW50SGFuZGxlciA9IChlOiBBeGlvc1Byb2dyZXNzRXZlbnQpID0+IHZvaWQ7XHJcbnR5cGUgUHJvZ3Jlc3NFdmVudEhhbmRsZXIgPSAodG90YWw6IG51bWJlciwgZTogQXhpb3NQcm9ncmVzc0V2ZW50KSA9PiB2b2lkO1xyXG5cclxuZnVuY3Rpb24gdHJpbVNsYXNoZXMoc3RyOiBzdHJpbmcpIHtcclxuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXC8rfFxcLyskL2csICcnKTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTM1VwbG9hZGVyUmVzcG9uc2UgZXh0ZW5kcyBBeGlvc1Jlc3BvbnNlIHtcclxuICB1cmw6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTM1VwbG9hZGVyR2xvYmFsT3B0aW9ucyB7XHJcbiAgZW5kcG9pbnQ/OiBzdHJpbmc7XHJcbiAgc3ViZm9sZGVyPzogc3RyaW5nO1xyXG4gIHZpZXdlckhvc3Q/OiBzdHJpbmc7XHJcbiAgc3RhcnRzX3dpdGg6IGFueVtdO1xyXG4gIGZvcm1JbnB1dHM/OiB7XHJcbiAgICBhY2w6IHN0cmluZztcclxuICAgIGJ1Y2tldDogc3RyaW5nO1xyXG4gICAga2V5OiBzdHJpbmc7XHJcbiAgICBQb2xpY3k6IHN0cmluZztcclxuICAgICdYLUFtei1BbGdvcml0aG0nOiBzdHJpbmc7XHJcbiAgICAnWC1BbXotQ3JlZGVudGlhbCc6IHN0cmluZztcclxuICAgICdYLUFtei1EYXRlJzogc3RyaW5nO1xyXG4gICAgJ1gtQW16LVNpZ25hdHVyZSc6IHN0cmluZztcclxuICAgIFtuYW1lOiBzdHJpbmddOiBhbnlcclxuICB9LFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFMzVXBsb2FkZXJSZXF1ZXN0T3B0aW9ucyB7XHJcbiAgZm9ybUlucHV0cz86IHsgW25hbWU6IHN0cmluZ106IGFueSB9O1xyXG4gIG9uVXBsb2FkUHJvZ3Jlc3M/OiAoZTogQXhpb3NQcm9ncmVzc0V2ZW50KSA9PiB2b2lkO1xyXG4gICdDb250ZW50LVR5cGUnPzogc3RyaW5nO1xyXG4gICdDb250ZW50LURpc3Bvc2l0aW9uJz86IHN0cmluZztcclxuICBrZXk/OiBzdHJpbmc7XHJcblxyXG4gIFtuYW1lOiBzdHJpbmddOiBhbnk7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUzNVcGxvYWRlck1vZHVsZSB7XHJcbiAgZ2V0KG5hbWU6IHN0cmluZywgb3B0aW9ucz86IFBhcnRpYWw8UzNVcGxvYWRlckdsb2JhbE9wdGlvbnM+KTogUzNVcGxvYWRlcjtcclxuICBjcmVhdGUobmFtZTogc3RyaW5nLCBvcHRpb25zPzogUGFydGlhbDxTM1VwbG9hZGVyR2xvYmFsT3B0aW9ucz4pOiBTM1VwbG9hZGVyO1xyXG4gIGRlc3Ryb3kobmFtZTogc3RyaW5nKTogdm9pZDtcclxuICBTM1VwbG9hZGVyOiB0eXBlb2YgUzNVcGxvYWRlcjtcclxufVxyXG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFRQSxNQUFNLFlBQXdDLENBQUE7QUFFdkMsU0FBUyxJQUNkLE1BQ0EsVUFBNEMsSUFDekI7QUFDbkIsU0FBTyxVQUFVLElBQUksTUFBTSxPQUFPLE1BQU0sT0FBTztBQUNqRDtBQUVPLFNBQVMsT0FBTyxNQUFjLFVBQTRDLElBQWdCO0FBQy9GLFNBQU8sSUFBSSxXQUFXLE1BQU0sT0FBTztBQUNyQztBQUVPLFNBQVMsUUFBUSxNQUFjO0FBQ3BDLFNBQU8sVUFBVSxJQUFJO0FBQ3ZCO0FBRUEsTUFBTSxpQkFBMEM7QUFBQSxFQUM5QyxVQUFVO0FBQUEsRUFDVixXQUFXO0FBQUEsRUFDWCxZQUFZO0FBQUEsRUFDWixhQUFhLENBQUE7QUFBQSxFQUNiLFlBQVk7QUFBQSxJQUNWLEtBQUs7QUFBQSxJQUNMLFFBQVE7QUFBQSxJQUNSLEtBQUs7QUFBQSxJQUNMLFFBQVE7QUFBQSxJQUNSLG1CQUFtQjtBQUFBLElBQ25CLG9CQUFvQjtBQUFBLElBQ3BCLGNBQWM7QUFBQSxJQUNkLG1CQUFtQjtBQUFBLEVBQUE7QUFFdkI7QUFFTyxNQUFNLG9CQUFtQixzQkFBTSxVQUFVLEdBQWlDO0FBQUEsRUFJL0UsWUFBc0IsTUFBYyxVQUE0QyxJQUFJO0FBQ2xGLFVBQUE7QUFEb0IsU0FBQSxPQUFBO0FBR3BCLFVBQU0sYUFBYSxLQUFLLGtCQUFrQixJQUFJLEtBQUssQ0FBQTtBQUVuRCxTQUFLLFVBQVUsVUFBbUMsQ0FBQSxHQUFJLGdCQUFnQixZQUFZLE9BQU87QUFBQSxFQUMzRjtBQUFBLEVBVEE7QUFBQSxFQUNBO0FBQUEsRUFVQSxNQUFNLGdC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
