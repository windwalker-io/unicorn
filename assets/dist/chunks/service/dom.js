import { d as defData } from "../utilities/data.js";
function domready(callback) {
  let promise = new Promise((resolve) => {
    if (document.readyState === "complete" || document.readyState === "interactive") {
      setTimeout(resolve, 0);
    } else {
      document.addEventListener("DOMContentLoaded", () => resolve());
    }
  });
  if (callback) {
    promise = promise.then(callback);
  }
  return promise;
}
function selectOne(ele) {
  let r;
  if (typeof ele === "string") {
    r = document.querySelector(ele);
  } else {
    r = ele;
  }
  if (!r) {
    return r;
  }
  return r;
}
function selectAll(ele, callback = void 0) {
  if (typeof ele === "string") {
    ele = document.querySelectorAll(ele);
  }
  const resultSet = [].slice.call(ele);
  if (callback) {
    return resultSet.map((el) => callback(el) || el);
  }
  return resultSet;
}
function getBoundedInstance(selector, name, callback = () => null) {
  const element = typeof selector === "string" ? document.querySelector(selector) : selector;
  if (!element) {
    return null;
  }
  return defData(element, name, callback);
}
function getBoundedInstanceList(selector, name, callback = () => null) {
  const items = typeof selector === "string" ? document.querySelectorAll(selector) : selector;
  return Array.from(items).map((ele) => getBoundedInstance(ele, name, callback));
}
function module(ele, name, callback = () => null) {
  if (typeof ele === "string") {
    return getBoundedInstanceList(ele, name, callback);
  }
  if (ele instanceof HTMLElement) {
    return getBoundedInstance(ele, name, callback);
  }
  return getBoundedInstanceList(ele, name, callback);
}
function h(element, attrs = {}, content = void 0) {
  const ele = document.createElement(element);
  for (let i in attrs) {
    const v = attrs[i];
    ele.setAttribute(i, v);
  }
  if (content !== null) {
    ele.innerHTML = content;
  }
  return ele;
}
function html(html2) {
  const div = document.createElement("div");
  div.innerHTML = html2;
  return div.children[0];
}
function delegate(wrapper, selector, eventName, callback) {
  if (typeof selector === "undefined" || selector === "") {
    throw new Error("The provided selector is empty.");
  }
  if (typeof callback === "undefined" || typeof callback !== "function") {
    throw new Error("Please specify an callback.");
  }
  const delegationSelectorsMap = {};
  const wrapperElement = selectOne(wrapper);
  wrapperElement?.addEventListener(eventName, function(event) {
    let element = event.target;
    let forceBreak = false;
    while (element && element !== wrapperElement) {
      for (const selector2 in delegationSelectorsMap) {
        if (element.matches(selector2)) {
          event.stopPropagation = function() {
            forceBreak = true;
          };
          Object.defineProperty(
            event,
            "currentTarget",
            {
              get() {
                return element;
              }
            }
          );
          const callbackList = delegationSelectorsMap[selector2];
          callbackList.forEach(function(callback2) {
            callback2(event);
          });
        }
      }
      if (forceBreak) {
        break;
      }
      element = element.parentElement;
    }
  });
  if (!delegationSelectorsMap[selector]) {
    delegationSelectorsMap[selector] = [callback];
  } else {
    delegationSelectorsMap[selector].push(callback);
  }
  return function unsubscribe() {
    if (!delegationSelectorsMap[selector]) {
      return;
    }
    if (delegationSelectorsMap[selector].length >= 2) {
      delegationSelectorsMap[selector] = delegationSelectorsMap[selector].filter((cb) => cb !== callback);
    } else {
      delete delegationSelectorsMap[selector];
    }
  };
}
function injectCssToDocument(doc, ...css) {
  if (!(doc instanceof Document)) {
    css.push(doc);
    doc = document;
  }
  const styles = css.map((css2) => {
    if (typeof css2 === "string") {
      const style = new CSSStyleSheet();
      style.replaceSync(css2);
      return style;
    }
    return css2;
  });
  doc.adoptedStyleSheets = [...doc.adoptedStyleSheets, ...styles];
  return styles;
}
export {
  selectAll as a,
  getBoundedInstanceList as b,
  html as c,
  domready as d,
  delegate as e,
  getBoundedInstance as g,
  h,
  injectCssToDocument as i,
  module as m,
  selectOne as s
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG9tLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2VydmljZS9kb20udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmRGF0YSB9IGZyb20gJy4uL3V0aWxpdGllcyc7XHJcblxyXG4vKipcclxuICogQHNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvOTg5OTcwMVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRvbXJlYWR5KGNhbGxiYWNrPzogKCh2YWx1ZTogYW55KSA9PiBhbnkpKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xyXG4gICAgLy8gc2VlIGlmIERPTSBpcyBhbHJlYWR5IGF2YWlsYWJsZVxyXG4gICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScgfHwgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2ludGVyYWN0aXZlJykge1xyXG4gICAgICAvLyBjYWxsIG9uIG5leHQgYXZhaWxhYmxlIHRpY2tcclxuICAgICAgc2V0VGltZW91dChyZXNvbHZlLCAwKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiByZXNvbHZlKCkpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBpZiAoY2FsbGJhY2spIHtcclxuICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4oY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHByb21pc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3RPbmU8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50VGFnTmFtZU1hcD4oZWxlOiBLKTogSFRNTEVsZW1lbnRUYWdOYW1lTWFwW0tdIHwgbnVsbDtcclxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdE9uZTxFIGV4dGVuZHMgRWxlbWVudCA9IEVsZW1lbnQ+KGVsZTogc3RyaW5nKTogRSB8IG51bGw7XHJcbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3RPbmU8RSBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PihlbGU6IEUpOiBFO1xyXG5leHBvcnQgZnVuY3Rpb24gc2VsZWN0T25lPEUgZXh0ZW5kcyBFbGVtZW50ID0gRWxlbWVudD4oZWxlOiBzdHJpbmcgfCBFKTogRSB8IG51bGw7XHJcbi8vIHNlbGVjdE9uZShlbGU6IHN0cmluZyk6IEVsZW1lbnQ7XHJcbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3RPbmU8RSBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PihlbGU6IEUgfCBzdHJpbmcpOiBFIHwgbnVsbCB7XHJcbiAgbGV0IHI6IEUgfCBudWxsO1xyXG5cclxuICBpZiAodHlwZW9mIGVsZSA9PT0gJ3N0cmluZycpIHtcclxuICAgIHIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEU+KGVsZSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHIgPSBlbGU7XHJcbiAgfVxyXG5cclxuICBpZiAoIXIpIHtcclxuICAgIHJldHVybiByO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3RBbGw8RSBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PihlbGU6IHN0cmluZywgY2FsbGJhY2s/OiAoKGVsZTogRSkgPT4gYW55KSk6IEVbXTtcclxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdEFsbDxFIGV4dGVuZHMgRWxlbWVudCA9IEVsZW1lbnQ+KGVsZTogTm9kZUxpc3RPZjxFPiB8IEVbXSwgY2FsbGJhY2s/OiAoKGVsZTogRSkgPT4gYW55KSk6IEVbXTtcclxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdEFsbDxFIGV4dGVuZHMgRWxlbWVudCA9IEVsZW1lbnQ+KFxyXG4gIGVsZTogc3RyaW5nIHwgTm9kZUxpc3RPZjxFPiB8IEVbXSxcclxuICBjYWxsYmFjaz86ICgoZWxlOiBFKSA9PiBhbnkpXHJcbik6IEVbXTtcclxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdEFsbDxFIGV4dGVuZHMga2V5b2YgSFRNTEVsZW1lbnRUYWdOYW1lTWFwPihcclxuICBlbGU6IEUsXHJcbiAgY2FsbGJhY2s/OiAoKGVsZTogSFRNTEVsZW1lbnRUYWdOYW1lTWFwW0VdKSA9PiBhbnkpXHJcbik6IEhUTUxFbGVtZW50VGFnTmFtZU1hcFtFXVtdO1xyXG5leHBvcnQgZnVuY3Rpb24gc2VsZWN0QWxsKFxyXG4gIGVsZTogTm9kZUxpc3RPZjxFbGVtZW50PiB8IEVsZW1lbnRbXSB8IHN0cmluZyxcclxuICBjYWxsYmFjazogKChlbDogRWxlbWVudCkgPT4gYW55KSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZFxyXG4pOiBFbGVtZW50W10ge1xyXG4gIGlmICh0eXBlb2YgZWxlID09PSAnc3RyaW5nJykge1xyXG4gICAgZWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbGUpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgcmVzdWx0U2V0OiBFbGVtZW50W10gPSBbXS5zbGljZS5jYWxsKGVsZSk7XHJcblxyXG4gIGlmIChjYWxsYmFjaykge1xyXG4gICAgcmV0dXJuIHJlc3VsdFNldC5tYXAoKGVsKSA9PiBjYWxsYmFjayhlbCkgfHwgZWwpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJlc3VsdFNldDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEJvdW5kZWRJbnN0YW5jZTxUID0gYW55LCBFID0gRWxlbWVudD4oc2VsZWN0b3I6IEUsIG5hbWU6IHN0cmluZywgY2FsbGJhY2s/OiAoKGVsOiBFKSA9PiBhbnkpKTogVDtcclxuZXhwb3J0IGZ1bmN0aW9uIGdldEJvdW5kZWRJbnN0YW5jZTxUID0gYW55LCBFIGV4dGVuZHMgRWxlbWVudCA9IEVsZW1lbnQ+KFxyXG4gIHNlbGVjdG9yOiBzdHJpbmcgfCBFLFxyXG4gIG5hbWU6IHN0cmluZyxcclxuICBjYWxsYmFjaz86ICgoZWw6IEUpID0+IGFueSlcclxuKTogVCB8IG51bGw7XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRCb3VuZGVkSW5zdGFuY2U8VCA9IGFueSwgRSBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PihzZWxlY3Rvcjogc3RyaW5nIHwgRSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKGVsOiBFKSA9PiBhbnkpID0gKCkgPT4gbnVsbCk6IFQgfCBudWxsIHtcclxuICBjb25zdCBlbGVtZW50ID0gdHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8RT4oc2VsZWN0b3IpIDogc2VsZWN0b3I7XHJcblxyXG4gIGlmICghZWxlbWVudCkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZGVmRGF0YShlbGVtZW50LCBuYW1lLCBjYWxsYmFjayk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRCb3VuZGVkSW5zdGFuY2VMaXN0PFQgPSBhbnksIEUgZXh0ZW5kcyBFbGVtZW50ID0gRWxlbWVudD4oXHJcbiAgc2VsZWN0b3I6IHN0cmluZyB8IE5vZGVMaXN0T2Y8RT4sXHJcbiAgbmFtZTogc3RyaW5nLFxyXG4gIGNhbGxiYWNrOiAoKGVsOiBFKSA9PiBhbnkpID0gKCkgPT4gbnVsbFxyXG4pOiAoVCB8IG51bGwpW10ge1xyXG4gIGNvbnN0IGl0ZW1zID0gdHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8RT4oc2VsZWN0b3IpIDogc2VsZWN0b3I7XHJcblxyXG4gIHJldHVybiBBcnJheS5mcm9tKGl0ZW1zKS5tYXAoKGVsZTogRSkgPT4gZ2V0Qm91bmRlZEluc3RhbmNlKGVsZSwgbmFtZSwgY2FsbGJhY2spKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1vZHVsZTxUID0gYW55LCBFIGV4dGVuZHMgRWxlbWVudCA9IEVsZW1lbnQ+KFxyXG4gIGVsZTogc3RyaW5nLFxyXG4gIG5hbWU6IHN0cmluZyxcclxuICBjYWxsYmFjaz86ICgoZWw6IEUpID0+IGFueSlcclxuKTogKFQgfCBudWxsKVtdO1xyXG5leHBvcnQgZnVuY3Rpb24gbW9kdWxlPFQgPSBhbnksIEUgZXh0ZW5kcyBFbGVtZW50ID0gRWxlbWVudD4oXHJcbiAgZWxlOiBOb2RlTGlzdE9mPEVsZW1lbnQ+LFxyXG4gIG5hbWU6IHN0cmluZyxcclxuICBjYWxsYmFjaz86ICgoZWw6IEUpID0+IGFueSkpOiAoVCB8IG51bGwpW107XHJcbmV4cG9ydCBmdW5jdGlvbiBtb2R1bGU8VCA9IGFueSwgRSBleHRlbmRzIEVsZW1lbnQgPSBFbGVtZW50PihcclxuICBlbGU6IEVsZW1lbnQsXHJcbiAgbmFtZTogc3RyaW5nLFxyXG4gIGNhbGxiYWNrPzogKChlbDogRSkgPT4gYW55KVxyXG4pOiBUIHwgbnVsbDtcclxuZXhwb3J0IGZ1bmN0aW9uIG1vZHVsZTxUID0gYW55LCBFIGV4dGVuZHMgRWxlbWVudCA9IEVsZW1lbnQ+KFxyXG4gIGVsZTogc3RyaW5nIHwgRWxlbWVudCB8IE5vZGVMaXN0T2Y8RWxlbWVudD4sXHJcbiAgbmFtZTogc3RyaW5nLFxyXG4gIGNhbGxiYWNrPzogKChlbDogRSkgPT4gYW55KVxyXG4pOiAoVCB8IG51bGwpW10gfCBUIHwgbnVsbDtcclxuZXhwb3J0IGZ1bmN0aW9uIG1vZHVsZTxUID0gYW55LCBFIGV4dGVuZHMgRWxlbWVudCA9IEVsZW1lbnQ+KFxyXG4gIGVsZTogc3RyaW5nIHwgRSB8IE5vZGVMaXN0T2Y8RT4sXHJcbiAgbmFtZTogc3RyaW5nLFxyXG4gIGNhbGxiYWNrOiAoKGVsOiBFKSA9PiBhbnkpID0gKCkgPT4gbnVsbFxyXG4pOiAoVCB8IG51bGwpW10gfCBUIHwgbnVsbCB7XHJcbiAgaWYgKHR5cGVvZiBlbGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICByZXR1cm4gZ2V0Qm91bmRlZEluc3RhbmNlTGlzdDxULCBFPihlbGUsIG5hbWUsIGNhbGxiYWNrKTtcclxuICB9XHJcblxyXG4gIGlmIChlbGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xyXG4gICAgcmV0dXJuIGdldEJvdW5kZWRJbnN0YW5jZTxULCBFPihlbGUsIG5hbWUsIGNhbGxiYWNrKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBnZXRCb3VuZGVkSW5zdGFuY2VMaXN0PFQsIEU+KGVsZSBhcyBOb2RlTGlzdE9mPEU+LCBuYW1lLCBjYWxsYmFjayk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoPFQgZXh0ZW5kcyBrZXlvZiBIVE1MRWxlbWVudFRhZ05hbWVNYXA+KFxyXG4gIGVsZW1lbnQ6IFQsXHJcbiAgYXR0cnM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxyXG4gIGNvbnRlbnQ/OiBhbnlcclxuKTogSFRNTEVsZW1lbnRUYWdOYW1lTWFwW1RdXHJcbmV4cG9ydCBmdW5jdGlvbiBoKGVsZW1lbnQ6IHN0cmluZywgYXR0cnM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fSwgY29udGVudDogYW55ID0gdW5kZWZpbmVkKTogSFRNTEVsZW1lbnQge1xyXG4gIGNvbnN0IGVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbWVudCk7XHJcblxyXG4gIGZvciAobGV0IGkgaW4gYXR0cnMpIHtcclxuICAgIGNvbnN0IHYgPSBhdHRyc1tpXTtcclxuXHJcbiAgICBlbGUuc2V0QXR0cmlidXRlKGksIHYpO1xyXG4gIH1cclxuXHJcbiAgaWYgKGNvbnRlbnQgIT09IG51bGwpIHtcclxuICAgIGVsZS5pbm5lckhUTUwgPSBjb250ZW50O1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGVsZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGh0bWw8VCBleHRlbmRzIEVsZW1lbnQgPSBIVE1MRWxlbWVudD4oaHRtbDogc3RyaW5nKTogVCB7XHJcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgZGl2LmlubmVySFRNTCA9IGh0bWw7XHJcbiAgcmV0dXJuIGRpdi5jaGlsZHJlblswXSBhcyBUO1xyXG59XHJcblxyXG4vKipcclxuICogUHVyZSBKUyB2ZXJzaW9uIG9mIGpRdWVyeSBkZWxlZ2F0ZSgpXHJcbiAqXHJcbiAqIEBzZWUgaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vaWFnb2JydW5vLzRkYjJlZDYyZGM0MGZhODQxYmI5YTVjN2RlOTJmNWY4XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZGVsZWdhdGUoXHJcbiAgd3JhcHBlcjogRWxlbWVudCB8IHN0cmluZyxcclxuICBzZWxlY3Rvcjogc3RyaW5nLFxyXG4gIGV2ZW50TmFtZTogc3RyaW5nLFxyXG4gIGNhbGxiYWNrOiAoZTogRXZlbnQpID0+IHZvaWRcclxuKTogKCkgPT4gdm9pZCB7XHJcbiAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gJ3VuZGVmaW5lZCcgfHwgc2VsZWN0b3IgPT09ICcnKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBwcm92aWRlZCBzZWxlY3RvciBpcyBlbXB0eS4nKTtcclxuICB9XHJcblxyXG4gIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2Ugc3BlY2lmeSBhbiBjYWxsYmFjay4nKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGRlbGVnYXRpb25TZWxlY3RvcnNNYXA6IFJlY29yZDxzdHJpbmcsIEZ1bmN0aW9uW10+ID0ge307XHJcblxyXG4gIGNvbnN0IHdyYXBwZXJFbGVtZW50ID0gc2VsZWN0T25lKHdyYXBwZXIpO1xyXG5cclxuICB3cmFwcGVyRWxlbWVudD8uYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgbGV0IGVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuICAgIGxldCBmb3JjZUJyZWFrID0gZmFsc2U7XHJcblxyXG4gICAgd2hpbGUgKGVsZW1lbnQgJiYgZWxlbWVudCAhPT0gd3JhcHBlckVsZW1lbnQpIHtcclxuICAgICAgZm9yIChjb25zdCBzZWxlY3RvciBpbiBkZWxlZ2F0aW9uU2VsZWN0b3JzTWFwKSB7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQubWF0Y2hlcyhzZWxlY3RvcikpIHtcclxuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZm9yY2VCcmVhayA9IHRydWU7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFxyXG4gICAgICAgICAgICBldmVudCxcclxuICAgICAgICAgICAgJ2N1cnJlbnRUYXJnZXQnLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgZ2V0KCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgIGNvbnN0IGNhbGxiYWNrTGlzdCA9IGRlbGVnYXRpb25TZWxlY3RvcnNNYXBbc2VsZWN0b3JdO1xyXG5cclxuICAgICAgICAgIGNhbGxiYWNrTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBjYWxsYmFjayhldmVudCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChmb3JjZUJyZWFrKSB7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGlmICghZGVsZWdhdGlvblNlbGVjdG9yc01hcFtzZWxlY3Rvcl0pIHtcclxuICAgIC8vIEFkZCBuZXcgc2VsZWN0b3IgdG8gdGhlIGxpc3RcclxuICAgIGRlbGVnYXRpb25TZWxlY3RvcnNNYXBbc2VsZWN0b3JdID0gW2NhbGxiYWNrXTtcclxuICB9IGVsc2Uge1xyXG4gICAgZGVsZWdhdGlvblNlbGVjdG9yc01hcFtzZWxlY3Rvcl0ucHVzaChjYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7XHJcbiAgICBpZiAoIWRlbGVnYXRpb25TZWxlY3RvcnNNYXBbc2VsZWN0b3JdKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGVsZWdhdGlvblNlbGVjdG9yc01hcFtzZWxlY3Rvcl0ubGVuZ3RoID49IDIpIHtcclxuICAgICAgZGVsZWdhdGlvblNlbGVjdG9yc01hcFtzZWxlY3Rvcl0gPSBkZWxlZ2F0aW9uU2VsZWN0b3JzTWFwW3NlbGVjdG9yXS5maWx0ZXIoY2IgPT4gY2IgIT09IGNhbGxiYWNrKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRlbGV0ZSBkZWxlZ2F0aW9uU2VsZWN0b3JzTWFwW3NlbGVjdG9yXTtcclxuICAgIH1cclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5qZWN0Q3NzVG9Eb2N1bWVudChkb2M6IERvY3VtZW50LCAuLi5jc3M6IChzdHJpbmcgfCBDU1NTdHlsZVNoZWV0KVtdKTogQ1NTU3R5bGVTaGVldFtdO1xyXG5leHBvcnQgZnVuY3Rpb24gaW5qZWN0Q3NzVG9Eb2N1bWVudCguLi5jc3M6IChzdHJpbmcgfCBDU1NTdHlsZVNoZWV0KVtdKTogQ1NTU3R5bGVTaGVldFtdO1xyXG5leHBvcnQgZnVuY3Rpb24gaW5qZWN0Q3NzVG9Eb2N1bWVudChcclxuICBkb2M6IERvY3VtZW50IHwgc3RyaW5nIHwgQ1NTU3R5bGVTaGVldCxcclxuICAuLi5jc3M6IChzdHJpbmcgfCBDU1NTdHlsZVNoZWV0KVtdXHJcbik6IENTU1N0eWxlU2hlZXRbXSB7XHJcbiAgaWYgKCEoZG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpKSB7XHJcbiAgICBjc3MucHVzaChkb2MpO1xyXG4gICAgZG9jID0gZG9jdW1lbnQ7XHJcbiAgfVxyXG5cclxuICBjb25zdCBzdHlsZXMgPSBjc3MubWFwKChjc3MpID0+IHtcclxuICAgIGlmICh0eXBlb2YgY3NzID09PSAnc3RyaW5nJykge1xyXG4gICAgICBjb25zdCBzdHlsZSA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XHJcbiAgICAgIHN0eWxlLnJlcGxhY2VTeW5jKGNzcyk7XHJcbiAgICAgIHJldHVybiBzdHlsZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY3NzO1xyXG4gIH0pO1xyXG5cclxuICBkb2MuYWRvcHRlZFN0eWxlU2hlZXRzID0gWy4uLmRvYy5hZG9wdGVkU3R5bGVTaGVldHMsIC4uLnN0eWxlc107XHJcblxyXG4gIHJldHVybiBzdHlsZXM7XHJcbn1cclxuIl0sIm5hbWVzIjpbImh0bWwiLCJzZWxlY3RvciIsImNhbGxiYWNrIiwiY3NzIl0sIm1hcHBpbmdzIjoiO0FBS08sU0FBUyxTQUFTLFVBQWlEO0FBQ3hFLE1BQUksVUFBVSxJQUFJLFFBQWMsQ0FBQyxZQUFZO0FBRTNDLFFBQUksU0FBUyxlQUFlLGNBQWMsU0FBUyxlQUFlLGVBQWU7QUFFL0UsaUJBQVcsU0FBUyxDQUFDO0FBQUEsSUFDdkIsT0FBTztBQUNMLGVBQVMsaUJBQWlCLG9CQUFvQixNQUFNLFFBQUEsQ0FBUztBQUFBLElBQy9EO0FBQUEsRUFDRixDQUFDO0FBRUQsTUFBSSxVQUFVO0FBQ1osY0FBVSxRQUFRLEtBQUssUUFBUTtBQUFBLEVBQ2pDO0FBRUEsU0FBTztBQUNUO0FBT08sU0FBUyxVQUF1QyxLQUEyQjtBQUNoRixNQUFJO0FBRUosTUFBSSxPQUFPLFFBQVEsVUFBVTtBQUMzQixRQUFJLFNBQVMsY0FBaUIsR0FBRztBQUFBLEVBQ25DLE9BQU87QUFDTCxRQUFJO0FBQUEsRUFDTjtBQUVBLE1BQUksQ0FBQyxHQUFHO0FBQ04sV0FBTztBQUFBLEVBQ1Q7QUFFQSxTQUFPO0FBQ1Q7QUFZTyxTQUFTLFVBQ2QsS0FDQSxXQUErQyxRQUNwQztBQUNYLE1BQUksT0FBTyxRQUFRLFVBQVU7QUFDM0IsVUFBTSxTQUFTLGlCQUFpQixHQUFHO0FBQUEsRUFDckM7QUFFQSxRQUFNLFlBQXVCLENBQUEsRUFBRyxNQUFNLEtBQUssR0FBRztBQUU5QyxNQUFJLFVBQVU7QUFDWixXQUFPLFVBQVUsSUFBSSxDQUFDLE9BQU8sU0FBUyxFQUFFLEtBQUssRUFBRTtBQUFBLEVBQ2pEO0FBRUEsU0FBTztBQUNUO0FBUU8sU0FBUyxtQkFBeUQsVUFDQSxNQUNBLFdBQTZCLE1BQU0sTUFBZ0I7QUFDMUgsUUFBTSxVQUFVLE9BQU8sYUFBYSxXQUFXLFNBQVMsY0FBaUIsUUFBUSxJQUFJO0FBRXJGLE1BQUksQ0FBQyxTQUFTO0FBQ1osV0FBTztBQUFBLEVBQ1Q7QUFFQSxTQUFPLFFBQVEsU0FBUyxNQUFNLFFBQVE7QUFDeEM7QUFFTyxTQUFTLHVCQUNkLFVBQ0EsTUFDQSxXQUE2QixNQUFNLE1BQ3JCO0FBQ2QsUUFBTSxRQUFRLE9BQU8sYUFBYSxXQUFXLFNBQVMsaUJBQW9CLFFBQVEsSUFBSTtBQUV0RixTQUFPLE1BQU0sS0FBSyxLQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVcsbUJBQW1CLEtBQUssTUFBTSxRQUFRLENBQUM7QUFDbEY7QUFxQk8sU0FBUyxPQUNkLEtBQ0EsTUFDQSxXQUE2QixNQUFNLE1BQ1Y7QUFDekIsTUFBSSxPQUFPLFFBQVEsVUFBVTtBQUMzQixXQUFPLHVCQUE2QixLQUFLLE1BQU0sUUFBUTtBQUFBLEVBQ3pEO0FBRUEsTUFBSSxlQUFlLGFBQWE7QUFDOUIsV0FBTyxtQkFBeUIsS0FBSyxNQUFNLFFBQVE7QUFBQSxFQUNyRDtBQUVBLFNBQU8sdUJBQTZCLEtBQXNCLE1BQU0sUUFBUTtBQUMxRTtBQU9PLFNBQVMsRUFBRSxTQUFpQixRQUE2QixDQUFBLEdBQUksVUFBZSxRQUF3QjtBQUN6RyxRQUFNLE1BQU0sU0FBUyxjQUFjLE9BQU87QUFFMUMsV0FBUyxLQUFLLE9BQU87QUFDbkIsVUFBTSxJQUFJLE1BQU0sQ0FBQztBQUVqQixRQUFJLGFBQWEsR0FBRyxDQUFDO0FBQUEsRUFDdkI7QUFFQSxNQUFJLFlBQVksTUFBTTtBQUNwQixRQUFJLFlBQVk7QUFBQSxFQUNsQjtBQUVBLFNBQU87QUFDVDtBQUVPLFNBQVMsS0FBc0NBLE9BQWlCO0FBQ3JFLFFBQU0sTUFBTSxTQUFTLGNBQWMsS0FBSztBQUN4QyxNQUFJLFlBQVlBO0FBQ2hCLFNBQU8sSUFBSSxTQUFTLENBQUM7QUFDdkI7QUFPTyxTQUFTLFNBQ2QsU0FDQSxVQUNBLFdBQ0EsVUFDWTtBQUNaLE1BQUksT0FBTyxhQUFhLGVBQWUsYUFBYSxJQUFJO0FBQ3RELFVBQU0sSUFBSSxNQUFNLGlDQUFpQztBQUFBLEVBQ25EO0FBRUEsTUFBSSxPQUFPLGFBQWEsZUFBZSxPQUFPLGFBQWEsWUFBWTtBQUNyRSxVQUFNLElBQUksTUFBTSw2QkFBNkI7QUFBQSxFQUMvQztBQUVBLFFBQU0seUJBQXFELENBQUE7QUFFM0QsUUFBTSxpQkFBaUIsVUFBVSxPQUFPO0FBRXhDLGtCQUFnQixpQkFBaUIsV0FBVyxTQUFVLE9BQU87QUFDM0QsUUFBSSxVQUE4QixNQUFNO0FBQ3hDLFFBQUksYUFBYTtBQUVqQixXQUFPLFdBQVcsWUFBWSxnQkFBZ0I7QUFDNUMsaUJBQVdDLGFBQVksd0JBQXdCO0FBQzdDLFlBQUksUUFBUSxRQUFRQSxTQUFRLEdBQUc7QUFDN0IsZ0JBQU0sa0JBQWtCLFdBQVk7QUFDbEMseUJBQWE7QUFBQSxVQUNmO0FBQ0EsaUJBQU87QUFBQSxZQUNMO0FBQUEsWUFDQTtBQUFBLFlBQ0E7QUFBQSxjQUNFLE1BQU07QUFDSix1QkFBTztBQUFBLGNBQ1Q7QUFBQSxZQUFBO0FBQUEsVUFDRjtBQUdGLGdCQUFNLGVBQWUsdUJBQXVCQSxTQUFRO0FBRXBELHVCQUFhLFFBQVEsU0FBVUMsV0FBVTtBQUN2Q0Esc0JBQVMsS0FBSztBQUFBLFVBQ2hCLENBQUM7QUFBQSxRQUNIO0FBQUEsTUFDRjtBQUVBLFVBQUksWUFBWTtBQUNkO0FBQUEsTUFDRjtBQUVBLGdCQUFVLFFBQVE7QUFBQSxJQUNwQjtBQUFBLEVBQ0YsQ0FBQztBQUVELE1BQUksQ0FBQyx1QkFBdUIsUUFBUSxHQUFHO0FBRXJDLDJCQUF1QixRQUFRLElBQUksQ0FBQyxRQUFRO0FBQUEsRUFDOUMsT0FBTztBQUNMLDJCQUF1QixRQUFRLEVBQUUsS0FBSyxRQUFRO0FBQUEsRUFDaEQ7QUFFQSxTQUFPLFNBQVMsY0FBYztBQUM1QixRQUFJLENBQUMsdUJBQXVCLFFBQVEsR0FBRztBQUNyQztBQUFBLElBQ0Y7QUFFQSxRQUFJLHVCQUF1QixRQUFRLEVBQUUsVUFBVSxHQUFHO0FBQ2hELDZCQUF1QixRQUFRLElBQUksdUJBQXVCLFFBQVEsRUFBRSxPQUFPLENBQUEsT0FBTSxPQUFPLFFBQVE7QUFBQSxJQUNsRyxPQUFPO0FBQ0wsYUFBTyx1QkFBdUIsUUFBUTtBQUFBLElBQ3hDO0FBQUEsRUFDRjtBQUNGO0FBSU8sU0FBUyxvQkFDZCxRQUNHLEtBQ2M7QUFDakIsTUFBSSxFQUFFLGVBQWUsV0FBVztBQUM5QixRQUFJLEtBQUssR0FBRztBQUNaLFVBQU07QUFBQSxFQUNSO0FBRUEsUUFBTSxTQUFTLElBQUksSUFBSSxDQUFDQyxTQUFRO0FBQzlCLFFBQUksT0FBT0EsU0FBUSxVQUFVO0FBQzNCLFlBQU0sUUFBUSxJQUFJLGNBQUE7QUFDbEIsWUFBTSxZQUFZQSxJQUFHO0FBQ3JCLGFBQU87QUFBQSxJQUNUO0FBRUEsV0FBT0E7QUFBQUEsRUFDVCxDQUFDO0FBRUQsTUFBSSxxQkFBcUIsQ0FBQyxHQUFHLElBQUksb0JBQW9CLEdBQUcsTUFBTTtBQUU5RCxTQUFPO0FBQ1Q7In0=
